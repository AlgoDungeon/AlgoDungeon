{"version":3,"sources":["../../src/use-tooltip.ts"],"names":["useTooltip","props","openDelay","closeDelay","closeOnClick","closeOnMouseDown","onOpenProp","onOpen","onCloseProp","onClose","placement","id","isOpenProp","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","htmlProps","popper","tooltipId","ref","React","useRef","enterTimeout","exitTimeout","openWithDelay","useCallback","current","window","setTimeout","closeWithDelay","clearTimeout","onClick","onMouseDown","onKeyDown","event","key","useEffect","getTriggerProps","_ref","triggerProps","onMouseEnter","onFocus","onBlur","undefined","getReferenceProps","getTooltipProps","tooltipProps","role","getTooltipPositionerProps","positionerProps","style","transformOrigin","getPopperProps","show","hide","getArrowWrapperProps","getArrowProps"],"mappings":";;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;AA0DO,SAASA,UAAT,CAAoBC,KAApB,EAAiD;AAAA,MAA7BA,KAA6B;AAA7BA,IAAAA,KAA6B,GAAJ,EAAI;AAAA;;AAAA,eAoBlDA,KApBkD;AAAA,gCAEpDC,SAFoD;AAAA,MAEpDA,SAFoD,iCAExC,CAFwC;AAAA,iCAGpDC,UAHoD;AAAA,MAGpDA,UAHoD,kCAGvC,CAHuC;AAAA,mCAIpDC,YAJoD;AAAA,MAIpDA,YAJoD,oCAIrC,IAJqC;AAAA,MAKpDC,gBALoD,UAKpDA,gBALoD;AAAA,MAM5CC,UAN4C,UAMpDC,MANoD;AAAA,MAO3CC,WAP2C,UAOpDC,OAPoD;AAAA,MAQpDC,SARoD,UAQpDA,SARoD;AAAA,MASpDC,EAToD,UASpDA,EAToD;AAAA,MAU5CC,UAV4C,UAUpDC,MAVoD;AAAA,MAWpDC,aAXoD,UAWpDA,aAXoD;AAAA,gCAYpDC,SAZoD;AAAA,MAYpDA,SAZoD,iCAYxC,EAZwC;AAAA,MAapDC,gBAboD,UAapDA,gBAboD;AAAA,MAcpDC,YAdoD,UAcpDA,YAdoD;AAAA,MAepDC,SAfoD,UAepDA,SAfoD;AAAA,MAgBpDC,UAhBoD,UAgBpDA,UAhBoD;AAAA,MAiBpDC,MAjBoD,UAiBpDA,MAjBoD;AAAA,MAkBpDC,MAlBoD,UAkBpDA,MAlBoD;AAAA,MAmBjDC,SAnBiD;;AAAA,uBAsBlB,0BAAc;AAChDT,IAAAA,MAAM,EAAED,UADwC;AAEhDE,IAAAA,aAAa,EAAbA,aAFgD;AAGhDP,IAAAA,MAAM,EAAED,UAHwC;AAIhDG,IAAAA,OAAO,EAAED;AAJuC,GAAd,CAtBkB;AAAA,MAsB9CK,MAtB8C,kBAsB9CA,MAtB8C;AAAA,MAsBtCN,MAtBsC,kBAsBtCA,MAtBsC;AAAA,MAsB9BE,OAtB8B,kBAsB9BA,OAtB8B;;AA6BtD,MAAMc,MAAM,GAAG,uBAAU;AACvBb,IAAAA,SAAS,EAATA,SADuB;AAEvBK,IAAAA,SAAS,EAATA,SAFuB;AAGvBC,IAAAA,gBAAgB,EAAhBA,gBAHuB;AAIvBC,IAAAA,YAAY,EAAZA,YAJuB;AAKvBC,IAAAA,SAAS,EAATA,SALuB;AAMvBE,IAAAA,MAAM,EAANA,MANuB;AAOvBC,IAAAA,MAAM,EAANA;AAPuB,GAAV,CAAf;AAUA,MAAMG,SAAS,GAAG,kBAAMb,EAAN,EAAU,SAAV,CAAlB;AAEA,MAAMc,GAAG,GAAGC,KAAK,CAACC,MAAN,CAAkB,IAAlB,CAAZ;AAEA,MAAMC,YAAY,GAAGF,KAAK,CAACC,MAAN,EAArB;AACA,MAAME,WAAW,GAAGH,KAAK,CAACC,MAAN,EAApB;AAEA,MAAMG,aAAa,GAAGJ,KAAK,CAACK,WAAN,CAAkB,YAAM;AAC5C,QAAI,CAACZ,UAAL,EAAiB;AACfS,MAAAA,YAAY,CAACI,OAAb,GAAuBC,MAAM,CAACC,UAAP,CAAkB3B,MAAlB,EAA0BL,SAA1B,CAAvB;AACD;AACF,GAJqB,EAInB,CAACiB,UAAD,EAAaZ,MAAb,EAAqBL,SAArB,CAJmB,CAAtB;AAMA,MAAMiC,cAAc,GAAGT,KAAK,CAACK,WAAN,CAAkB,YAAM;AAC7C,QAAIH,YAAY,CAACI,OAAjB,EAA0B;AACxBI,MAAAA,YAAY,CAACR,YAAY,CAACI,OAAd,CAAZ;AACD;;AACDH,IAAAA,WAAW,CAACG,OAAZ,GAAsBC,MAAM,CAACC,UAAP,CAAkBzB,OAAlB,EAA2BN,UAA3B,CAAtB;AACD,GALsB,EAKpB,CAACA,UAAD,EAAaM,OAAb,CALoB,CAAvB;AAOA,MAAM4B,OAAO,GAAGX,KAAK,CAACK,WAAN,CAAkB,YAAM;AACtC,QAAI3B,YAAJ,EAAkB;AAChB+B,MAAAA,cAAc;AACf;AACF,GAJe,EAIb,CAAC/B,YAAD,EAAe+B,cAAf,CAJa,CAAhB;AAMA,MAAMG,WAAW,GAAGZ,KAAK,CAACK,WAAN,CAAkB,YAAM;AAC1C,QAAI1B,gBAAJ,EAAsB;AACpB8B,MAAAA,cAAc;AACf;AACF,GAJmB,EAIjB,CAAC9B,gBAAD,EAAmB8B,cAAnB,CAJiB,CAApB;;AAMA,MAAMI,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAA0B;AAC1C,QAAI3B,MAAM,IAAI2B,KAAK,CAACC,GAAN,KAAc,QAA5B,EAAsC;AACpCN,MAAAA,cAAc;AACf;AACF,GAJD;;AAMA,+BAAiB,SAAjB,EAA4BI,SAA5B;AAEAb,EAAAA,KAAK,CAACgB,SAAN,CACE;AAAA,WAAM,YAAM;AACVN,MAAAA,YAAY,CAACR,YAAY,CAACI,OAAd,CAAZ;AACAI,MAAAA,YAAY,CAACP,WAAW,CAACG,OAAb,CAAZ;AACD,KAHD;AAAA,GADF,EAKE,EALF;AAQA;AACF;AACA;AACA;AACA;AACA;;AACE,+BAAiB,YAAjB,EAA+BG,cAA/B,EAA+CV,GAAG,CAACO,OAAnD;AAEA,MAAMW,eAA2B,GAAGjB,KAAK,CAACK,WAAN,CAClC,UAAC9B,KAAD,EAAa2C,IAAb,EAA6B;AAAA,QAA5B3C,KAA4B;AAA5BA,MAAAA,KAA4B,GAApB,EAAoB;AAAA;;AAAA,QAAhB2C,IAAgB;AAAhBA,MAAAA,IAAgB,GAAT,IAAS;AAAA;;AAC3B,QAAMC,YAAY,gBACb5C,KADa;AAEhB6C,MAAAA,YAAY,EAAE,4BAAgB7C,KAAK,CAAC6C,YAAtB,EAAoChB,aAApC,CAFE;AAGhBO,MAAAA,OAAO,EAAE,4BAAgBpC,KAAK,CAACoC,OAAtB,EAA+BA,OAA/B,CAHO;AAIhBC,MAAAA,WAAW,EAAE,4BAAgBrC,KAAK,CAACqC,WAAtB,EAAmCA,WAAnC,CAJG;AAKhBS,MAAAA,OAAO,EAAE,4BAAgB9C,KAAK,CAAC8C,OAAtB,EAA+BjB,aAA/B,CALO;AAMhBkB,MAAAA,MAAM,EAAE,4BAAgB/C,KAAK,CAAC+C,MAAtB,EAA8Bb,cAA9B,CANQ;AAOhB,0BAAoBtB,MAAM,GAAGW,SAAH,GAAeyB;AAPzB,MAAlB;;AAUA,WAAO1B,MAAM,CAAC2B,iBAAP,CAAyBL,YAAzB,EAAuC,sBAAUpB,GAAV,EAAemB,IAAf,CAAvC,CAAP;AACD,GAbiC,EAclC,CACEd,aADF,EAEEK,cAFF,EAGEG,WAHF,EAIEzB,MAJF,EAKEW,SALF,EAMEa,OANF,EAOEd,MAPF,CAdkC,CAApC;AAyBA,MAAM4B,eAA2B,GAAGzB,KAAK,CAACK,WAAN,CAClC,UAAC9B,KAAD,EAAa2C,IAAb,EAA6B;AAAA,QAA5B3C,KAA4B;AAA5BA,MAAAA,KAA4B,GAApB,EAAoB;AAAA;;AAAA,QAAhB2C,IAAgB;AAAhBA,MAAAA,IAAgB,GAAT,IAAS;AAAA;;AAC3B,QAAMQ,YAAY;AAChB3B,MAAAA,GAAG,EAAEmB;AADW,OAEbtB,SAFa,EAGbrB,KAHa;AAIhBU,MAAAA,EAAE,EAAEa,SAJY;AAKhB6B,MAAAA,IAAI,EAAE;AALU,MAAlB;;AAQA,WAAOD,YAAP;AACD,GAXiC,EAYlC,CAAC9B,SAAD,EAAYE,SAAZ,CAZkC,CAApC;AAeA,MAAM8B,yBAAqC,GAAG5B,KAAK,CAACK,WAAN,CAC5C,UAAC9B,KAAD,EAAa2C,IAAb,EAA6B;AAAA,QAA5B3C,KAA4B;AAA5BA,MAAAA,KAA4B,GAApB,EAAoB;AAAA;;AAAA,QAAhB2C,IAAgB;AAAhBA,MAAAA,IAAgB,GAAT,IAAS;AAAA;;AAC3B,QAAMW,eAAe,gBAChBtD,KADgB;AAEnBuD,MAAAA,KAAK,eACAvD,KAAK,CAACuD,KADN;AAEHC,QAAAA,eAAe,EAAElC,MAAM,CAACkC;AAFrB;AAFc,MAArB;;AAOA,WAAOlC,MAAM,CAACmC,cAAP,CAAsBH,eAAtB,EAAuCX,IAAvC,CAAP;AACD,GAV2C,EAW5C,CAACrB,MAAD,CAX4C,CAA9C;AAcA,SAAO;AACLV,IAAAA,MAAM,EAANA,MADK;AAEL8C,IAAAA,IAAI,EAAE7B,aAFD;AAGL8B,IAAAA,IAAI,EAAEzB,cAHD;AAILQ,IAAAA,eAAe,EAAfA,eAJK;AAKLQ,IAAAA,eAAe,EAAfA,eALK;AAMLG,IAAAA,yBAAyB,EAAzBA,yBANK;AAOLG,IAAAA,eAAe,EAAElC,MAAM,CAACkC,eAPnB;AAQL/C,IAAAA,SAAS,EAAEa,MAAM,CAACb,SARb;AASLmD,IAAAA,oBAAoB,EAAEtC,MAAM,CAACsC,oBATxB;AAULC,IAAAA,aAAa,EAAEvC,MAAM,CAACuC;AAVjB,GAAP;AAYD","sourcesContent":["import { useDisclosure, useEventListener, useId } from \"@chakra-ui/hooks\"\nimport { Placement, usePopper, UsePopperProps } from \"@chakra-ui/popper\"\nimport { callAllHandlers, mergeRefs, PropGetter } from \"@chakra-ui/utils\"\nimport * as React from \"react\"\n\nexport interface UseTooltipProps\n  extends Pick<\n    UsePopperProps,\n    | \"arrowSize\"\n    | \"modifiers\"\n    | \"gutter\"\n    | \"offset\"\n    | \"arrowShadowColor\"\n    | \"arrowPadding\"\n  > {\n  /**\n   * Delay (in ms) before showing the tooltip\n   * @default 0ms\n   */\n  openDelay?: number\n  /**\n   * Delay (in ms) before hiding the tooltip\n   * @default 0ms\n   */\n  closeDelay?: number\n  /**\n   * If `true`, the tooltip will hide on click\n   */\n  closeOnClick?: boolean\n  /**\n   * If `true`, the tooltip will hide while the mouse\n   * is down\n   */\n  closeOnMouseDown?: boolean\n  /**\n   * Callback to run when the tooltip shows\n   */\n  onOpen?(): void\n  /**\n   * Callback to run when the tooltip hides\n   */\n  onClose?(): void\n  /**\n   * The Popper.js placement of the tooltip\n   */\n  placement?: Placement\n  /**\n   * Custom `id` to use in place of `uuid`\n   */\n  id?: string\n  /**\n   * If `true`, the tooltip will be shown (in controlled mode)\n   */\n  isOpen?: boolean\n  /**\n   * If `true`, the tooltip will be initially shown\n   */\n  defaultIsOpen?: boolean\n  isDisabled?: boolean\n}\n\nexport function useTooltip(props: UseTooltipProps = {}) {\n  const {\n    openDelay = 0,\n    closeDelay = 0,\n    closeOnClick = true,\n    closeOnMouseDown,\n    onOpen: onOpenProp,\n    onClose: onCloseProp,\n    placement,\n    id,\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    arrowSize = 10,\n    arrowShadowColor,\n    arrowPadding,\n    modifiers,\n    isDisabled,\n    gutter,\n    offset,\n    ...htmlProps\n  } = props\n\n  const { isOpen, onOpen, onClose } = useDisclosure({\n    isOpen: isOpenProp,\n    defaultIsOpen,\n    onOpen: onOpenProp,\n    onClose: onCloseProp,\n  })\n\n  const popper = usePopper({\n    placement,\n    arrowSize,\n    arrowShadowColor,\n    arrowPadding,\n    modifiers,\n    gutter,\n    offset,\n  })\n\n  const tooltipId = useId(id, \"tooltip\")\n\n  const ref = React.useRef<any>(null)\n\n  const enterTimeout = React.useRef<number>()\n  const exitTimeout = React.useRef<number>()\n\n  const openWithDelay = React.useCallback(() => {\n    if (!isDisabled) {\n      enterTimeout.current = window.setTimeout(onOpen, openDelay)\n    }\n  }, [isDisabled, onOpen, openDelay])\n\n  const closeWithDelay = React.useCallback(() => {\n    if (enterTimeout.current) {\n      clearTimeout(enterTimeout.current)\n    }\n    exitTimeout.current = window.setTimeout(onClose, closeDelay)\n  }, [closeDelay, onClose])\n\n  const onClick = React.useCallback(() => {\n    if (closeOnClick) {\n      closeWithDelay()\n    }\n  }, [closeOnClick, closeWithDelay])\n\n  const onMouseDown = React.useCallback(() => {\n    if (closeOnMouseDown) {\n      closeWithDelay()\n    }\n  }, [closeOnMouseDown, closeWithDelay])\n\n  const onKeyDown = (event: KeyboardEvent) => {\n    if (isOpen && event.key === \"Escape\") {\n      closeWithDelay()\n    }\n  }\n\n  useEventListener(\"keydown\", onKeyDown)\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(enterTimeout.current)\n      clearTimeout(exitTimeout.current)\n    },\n    [],\n  )\n\n  /**\n   * This allows for catching mouseleave events when the tooltip\n   * trigger is disabled. There's currently a known issue in\n   * React regarding the onMouseLeave polyfill.\n   * @see https://github.com/facebook/react/issues/11972\n   */\n  useEventListener(\"mouseleave\", closeWithDelay, ref.current)\n\n  const getTriggerProps: PropGetter = React.useCallback(\n    (props = {}, _ref = null) => {\n      const triggerProps = {\n        ...props,\n        onMouseEnter: callAllHandlers(props.onMouseEnter, openWithDelay),\n        onClick: callAllHandlers(props.onClick, onClick),\n        onMouseDown: callAllHandlers(props.onMouseDown, onMouseDown),\n        onFocus: callAllHandlers(props.onFocus, openWithDelay),\n        onBlur: callAllHandlers(props.onBlur, closeWithDelay),\n        \"aria-describedby\": isOpen ? tooltipId : undefined,\n      }\n\n      return popper.getReferenceProps(triggerProps, mergeRefs(ref, _ref))\n    },\n    [\n      openWithDelay,\n      closeWithDelay,\n      onMouseDown,\n      isOpen,\n      tooltipId,\n      onClick,\n      popper,\n    ],\n  )\n\n  const getTooltipProps: PropGetter = React.useCallback(\n    (props = {}, _ref = null) => {\n      const tooltipProps = {\n        ref: _ref,\n        ...htmlProps,\n        ...props,\n        id: tooltipId,\n        role: \"tooltip\",\n      }\n\n      return tooltipProps\n    },\n    [htmlProps, tooltipId],\n  )\n\n  const getTooltipPositionerProps: PropGetter = React.useCallback(\n    (props = {}, _ref = null) => {\n      const positionerProps = {\n        ...props,\n        style: {\n          ...props.style,\n          transformOrigin: popper.transformOrigin,\n        },\n      }\n      return popper.getPopperProps(positionerProps, _ref)\n    },\n    [popper],\n  )\n\n  return {\n    isOpen,\n    show: openWithDelay,\n    hide: closeWithDelay,\n    getTriggerProps,\n    getTooltipProps,\n    getTooltipPositionerProps,\n    transformOrigin: popper.transformOrigin,\n    placement: popper.placement,\n    getArrowWrapperProps: popper.getArrowWrapperProps,\n    getArrowProps: popper.getArrowProps,\n  }\n}\n\nexport type UseTooltipReturn = ReturnType<typeof useTooltip>\n"],"file":"use-tooltip.js"}
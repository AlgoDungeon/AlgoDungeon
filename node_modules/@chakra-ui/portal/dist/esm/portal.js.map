{"version":3,"sources":["../../src/portal.tsx"],"names":["useCallbackRef","useForceUpdate","useSafeLayoutEffect","createContext","__DEV__","React","createPortal","usePortalManager","PortalContextProvider","usePortalContext","strict","name","Container","props","children","zIndex","position","top","left","right","bottom","Portal","tempNode","useRef","portal","forceUpdate","getContainer","onMount","onUnmount","parentPortal","manager","current","doc","ownerDocument","createElement","className","host","body","appendChild","portalNode","contains","removeChild","childrenToRender","selector","displayName"],"mappings":"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","sourcesContent":["import {\n  useCallbackRef,\n  useForceUpdate,\n  useSafeLayoutEffect,\n} from \"@chakra-ui/hooks\"\nimport { createContext, __DEV__ } from \"@chakra-ui/utils\"\nimport * as React from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { usePortalManager } from \"./portal-manager\"\n\ntype PortalContext = HTMLDivElement | null\n\nconst [PortalContextProvider, usePortalContext] = createContext<PortalContext>({\n  strict: false,\n  name: \"PortalContext\",\n})\n\nconst Container: React.FC<{ zIndex?: number }> = (props) => {\n  const { children, zIndex } = props\n  return (\n    <div\n      className=\"chakra-portal-zIndex\"\n      style={{\n        position: \"absolute\",\n        zIndex,\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport interface PortalProps {\n  /**\n   * Function called when the portal mounts\n   */\n  onMount?(): void\n  /**\n   * Function called when the portal unmounts\n   */\n  onUnmount?(): void\n  /**\n   * Function that will be called to get the parent element\n   * that the portal will be attached to.\n   */\n  getContainer?: () => HTMLElement | null\n  /**\n   * The content or node you'll like to portal\n   */\n  children: React.ReactNode\n}\n\n/**\n * Portal\n *\n * Declarative component used to render children into a DOM node\n * that exists outside the DOM hierarchy of the parent component.\n *\n * @see Docs https://chakra-ui.com/docs/overlay/portal\n */\n\nexport function Portal(props: PortalProps) {\n  const tempNode = React.useRef<HTMLDivElement | null>(null)\n  const portal = React.useRef<HTMLDivElement | null>(null)\n\n  const forceUpdate = useForceUpdate()\n\n  const getContainer = useCallbackRef(props.getContainer)\n  const onMount = useCallbackRef(props.onMount)\n  const onUnmount = useCallbackRef(props.onUnmount)\n\n  const parentPortal = usePortalContext()\n  const manager = usePortalManager()\n\n  useSafeLayoutEffect(() => {\n    if (!tempNode.current) return\n\n    const doc = tempNode.current!.ownerDocument\n    portal.current = doc.createElement(\"div\")\n    portal.current.className = Portal.className\n\n    const host = getContainer() ?? parentPortal ?? doc.body\n\n    host.appendChild(portal.current)\n    forceUpdate()\n\n    onMount()\n\n    const portalNode = portal.current\n    return () => {\n      onUnmount()\n      if (host.contains(portalNode)) {\n        host.removeChild(portalNode)\n      }\n    }\n  }, [])\n\n  const childrenToRender = manager?.zIndex ? (\n    <Container>{props.children}</Container>\n  ) : (\n    props.children\n  )\n\n  return portal.current ? (\n    createPortal(\n      <PortalContextProvider value={portal.current}>\n        {childrenToRender}\n      </PortalContextProvider>,\n      portal.current,\n    )\n  ) : (\n    <span ref={tempNode} />\n  )\n}\n\nPortal.className = \"chakra-portal\"\nPortal.selector = `.${Portal.className}`\n\nif (__DEV__) {\n  Portal.displayName = \"Portal\"\n}\n"],"file":"portal.js"}
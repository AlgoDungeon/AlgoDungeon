{"version":3,"sources":["../../src/system.ts"],"names":["css","propNames","memoizedGet","get","objectFilter","objectAssign","isFunction","_styled","shouldForwardProp","domElements","stylePropNames","reduce","keymirror","key","getStyleObject","baseStyle","props","theme","layerStyle","textStyle","apply","noOfLines","isTruncated","cssProp","__css","sx","rest","_layerStyle","_textStyle","styleProps","_","prop","truncateStyle","overflow","textOverflow","display","WebkitBoxOrient","WebkitLineClamp","whiteSpace","finalStyles","computedCSS","cssObject","styled","component","options","styledOptions","styleObject","chakra","forEach","tag"],"mappings":"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","sourcesContent":["import {\n  css,\n  propNames,\n  ResponsiveValue,\n  SystemProps,\n  SystemStyleObject,\n  ChakraStyleProps,\n} from \"@chakra-ui/styled-system\"\nimport {\n  memoizedGet as get,\n  objectFilter,\n  objectAssign,\n  Dict,\n  isFunction,\n} from \"@chakra-ui/utils\"\nimport _styled, {\n  CSSObject,\n  FunctionInterpolation,\n  Interpolation,\n} from \"@emotion/styled\"\nimport { shouldForwardProp } from \"./should-forward-prop\"\nimport { As, ChakraComponent, ChakraProps, PropsOf } from \"./system.types\"\nimport { domElements, DOMElements } from \"./system.utils\"\n\n/**\n * Convert propNames array to object to faster lookup perf\n */\nconst stylePropNames = propNames.reduce((keymirror, key) => {\n  if (typeof key !== \"object\" && typeof key !== \"function\") keymirror[key] = key\n  return keymirror\n}, {})\n\ninterface StyleResolverProps extends SystemProps {\n  __css?: SystemStyleObject\n  sx?: SystemStyleObject\n  theme: Dict\n  css?: CSSObject\n  noOfLines?: ResponsiveValue<number>\n  isTruncated?: boolean\n  layerStyle?: string\n  textStyle?: string\n  apply?: ResponsiveValue<string>\n}\n\ntype GetStyleObject = (options: {\n  baseStyle?: SystemStyleObject\n}) => FunctionInterpolation<StyleResolverProps>\n\n/**\n * Style resolver function that manages how style props are merged\n * in combination with other possible ways of defining styles.\n *\n * For example, take a component defined this way:\n * ```jsx\n * <Box fontSize=\"24px\" sx={{ fontSize: \"40px\" }}></Box>\n * ```\n *\n * We want to manage the priority of the styles properly to prevent unwanted\n * behaviors. Right now, the `sx` prop has the highest priority so the resolved\n * fontSize will be `40px`\n */\nexport const getStyleObject: GetStyleObject = ({ baseStyle }) => (props) => {\n  const {\n    theme,\n    layerStyle,\n    textStyle,\n    apply,\n    noOfLines,\n    isTruncated,\n    css: cssProp,\n    __css,\n    sx,\n    ...rest\n  } = props\n\n  const _layerStyle = get(theme, `layerStyles.${layerStyle}`, {})\n  const _textStyle = get(theme, `textStyles.${textStyle}`, {})\n\n  // filter out props that aren't style props\n  const styleProps = objectFilter(rest, (_, prop) => prop in stylePropNames)\n\n  let truncateStyle: any = {}\n\n  if (noOfLines != null) {\n    truncateStyle = {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      display: \"-webkit-box\",\n      WebkitBoxOrient: \"vertical\",\n      WebkitLineClamp: noOfLines,\n    }\n  } else if (isTruncated) {\n    truncateStyle = {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n    }\n  }\n\n  /**\n   * The computed, theme-aware style object. The other of the properties\n   * within `objectAssign` determines how styles are overriden.\n   */\n  const finalStyles = objectAssign(\n    {},\n    __css,\n    baseStyle,\n    { apply },\n    _layerStyle,\n    _textStyle,\n    truncateStyle,\n    styleProps,\n    sx,\n  )\n\n  // Converts theme-aware style object to real css object\n  const computedCSS = css(finalStyles)(props.theme)\n\n  // Merge the computed css object with styles in css prop\n  const cssObject: Interpolation<StyleResolverProps> = objectAssign(\n    computedCSS,\n    isFunction(cssProp) ? cssProp(theme) : cssProp,\n  )\n\n  return cssObject\n}\n\ninterface StyledOptions {\n  shouldForwardProp?(prop: string): boolean\n  label?: string\n  baseStyle?: SystemStyleObject\n}\n\nexport function styled<T extends As, P = {}>(\n  component: T,\n  options?: StyledOptions,\n) {\n  const { baseStyle, ...styledOptions } = options ?? {}\n\n  if (!styledOptions.shouldForwardProp) {\n    styledOptions.shouldForwardProp = shouldForwardProp\n  }\n\n  const styleObject = getStyleObject({ baseStyle })\n  return _styled(\n    component as React.ComponentType<any>,\n    styledOptions,\n  )(styleObject) as ChakraComponent<T, P>\n}\n\nexport type HTMLChakraComponents = {\n  [Tag in DOMElements]: ChakraComponent<Tag, {}>\n}\n\nexport type HTMLChakraProps<T extends As> = Omit<\n  PropsOf<T>,\n  T extends \"svg\"\n    ? \"ref\" | \"children\" | keyof ChakraStyleProps\n    : \"ref\" | keyof ChakraStyleProps\n> &\n  ChakraProps & { as?: As }\n\ntype ChakraFactory = {\n  <T extends As, P = {}>(\n    component: T,\n    options?: StyledOptions,\n  ): ChakraComponent<T, P>\n}\n\nexport const chakra = (styled as unknown) as ChakraFactory &\n  HTMLChakraComponents\n\ndomElements.forEach((tag) => {\n  chakra[tag] = chakra(tag)\n})\n"],"file":"system.js"}
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,k,n){f!=Array.prototype&&f!=Object.prototype&&(f[k]=n.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var f=0;return function(k){return $jscomp.SYMBOL_PREFIX+(k||"")+f++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.asyncIterator;f||(f=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(f){var k=0;return $jscomp.iteratorPrototype(function(){return k<f.length?{done:!1,value:f[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.polyfill=function(f,k,n,q){if(k){n=$jscomp.global;f=f.split(".");for(q=0;q<f.length-1;q++){var u=f[q];u in n||(n[u]={});n=n[u]}f=f[f.length-1];q=n[f];k=k(q);k!=q&&null!=k&&$jscomp.defineProperty(n,f,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.from",function(f){return f?f:function(f,n,q){$jscomp.initSymbolIterator();n=null!=n?n:function(f){return f};var k=[],z=f[Symbol.iterator];if("function"==typeof z){f=z.call(f);for(var D=0;!(z=f.next()).done;)k.push(n.call(q,z.value,D++))}else for(z=f.length,D=0;D<z;D++)k.push(n.call(q,f[D],D));return k}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(f,n,q){var k=this.length||0;0>n&&(n=Math.max(0,k+n));if(null==q||q>k)q=k;q=Number(q);0>q&&(q=Math.max(0,k+q));for(n=Number(n||0);n<q;n++)this[n]=f;return this}},"es6","es3");
$jscomp.checkStringArgs=function(f,k,n){if(null==f)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return f+""};
$jscomp.polyfill("String.prototype.repeat",function(f){return f?f:function(f){var n=$jscomp.checkStringArgs(this,null,"repeat");if(0>f||1342177279<f)throw new RangeError("Invalid count value");f|=0;for(var k="";f;)if(f&1&&(k+=n),f>>>=1)n+=n;return k}},"es6","es3");$jscomp.stringPadding=function(f,k){f=void 0!==f?String(f):" ";return 0<k&&f?f.repeat(Math.ceil(k/f.length)).substring(0,k):""};
$jscomp.polyfill("String.prototype.padStart",function(f){return f?f:function(f,n){var k=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(n,f-k.length)+k}},"es8","es3");$jscomp.owns=function(f,k){return Object.prototype.hasOwnProperty.call(f,k)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(f,k){for(var n=1;n<arguments.length;n++){var q=arguments[n];if(q)for(var u in q)$jscomp.owns(q,u)&&(f[u]=q[u])}return f};
$jscomp.polyfill("Object.assign",function(f){return f||$jscomp.assign},"es6","es3");$jscomp.iteratorFromArray=function(f,k){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var n=0,q={next:function(){if(n<f.length){var u=n++;return{value:k(u,f[u]),done:!1}}q.next=function(){return{done:!0,value:void 0}};return q.next()}};q[Symbol.iterator]=function(){return q};return q};
$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6","es3");$jscomp.findInternal=function(f,k,n){f instanceof String&&(f=String(f));for(var q=f.length,u=0;u<q;u++){var z=f[u];if(k.call(n,z,u,f))return{i:u,v:z}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,n){return $jscomp.findInternal(this,f,n).v}},"es6","es3");
function _assertThisInitialized(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}
function _createForOfIteratorHelperLoose(f,k){var n;if("undefined"===typeof Symbol||null==f[Symbol.iterator]){if(Array.isArray(f)||(n=_unsupportedIterableToArray(f))||k&&f&&"number"===typeof f.length){n&&(f=n);var q=0;return function(){return q>=f.length?{done:!0}:{done:!1,value:f[q++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}n=f[Symbol.iterator]();return n.next.bind(n)}
function _unsupportedIterableToArray(f,k){if(f){if("string"===typeof f)return _arrayLikeToArray(f,k);var n=Object.prototype.toString.call(f).slice(8,-1);"Object"===n&&f.constructor&&(n=f.constructor.name);if("Map"===n||"Set"===n)return Array.from(f);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(f,k)}}function _arrayLikeToArray(f,k){if(null==k||k>f.length)k=f.length;for(var n=0,q=Array(k);n<k;n++)q[n]=f[n];return q}
function _inheritsLoose(f,k){f.prototype=Object.create(k.prototype);f.prototype.constructor=f;f.__proto__=k}
(function(f,k){"object"===typeof exports&&"undefined"!==typeof module?k(exports):"function"===typeof define&&define.amd?define(["exports"],k):k(f.ROT={})})(this,function(f){function k(d,c){return(d%c+c)%c}function n(d,c,b){void 0===c&&(c=0);void 0===b&&(b=1);return d<c?c:d>b?b:d}function q(d){return d.charAt(0).toUpperCase()+d.substring(1)}function u(d){for(var c=arguments.length,b=Array(1<c?c-1:0),a=1;a<c;a++)b[a-1]=arguments[a];var e=u.map;return d.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,function(a,
m,p,h){if("%"==d.charAt(h-1))return a.substring(1);if(!b.length)return a;p=(m||p).split(",");m=p.shift()||"";h=e[m.toLowerCase()];if(!h)return a;a=b.shift();a=a[h].apply(a,p);m=m.charAt(0);m!=m.toLowerCase()&&(a=q(a));return a})}function z(d){var c;if(d in O)var b=O[d];else{if("#"==d.charAt(0))if(b=(d.match(/[0-9a-f]/gi)||[]).map(function(a){return parseInt(a,16)}),3==b.length)b=b.map(function(a){return 17*a});else for(c=0;3>c;c++)b[c+1]+=16*b[c],b.splice(c,1);else b=(c=d.match(/rgb\(([0-9, ]+)\)/i))?
c[1].split(/\s*,\s*/).map(function(a){return parseInt(a)}):[0,0,0];O[d]=b}return b.slice()}function D(d){for(var c=arguments.length,b=Array(1<c?c-1:0),a=1;a<c;a++)b[a-1]=arguments[a];for(c=0;3>c;c++)for(a=0;a<b.length;a++)d[c]+=b[a][c];return d}function X(d,c,b){void 0===b&&(b=.5);for(var a=d.slice(),e=0;3>e;e++)a[e]=Math.round(a[e]+b*(c[e]-d[e]));return a}function Y(d,c,b){void 0===b&&(b=.5);d=P(d);c=P(c);for(var a=0;3>a;a++)d[a]+=b*(c[a]-d[a]);return Z(d)}function P(d){var c=d[0]/255,b=d[1]/255;
d=d[2]/255;var a=Math.max(c,b,d),e=Math.min(c,b,d),g=0,m=(a+e)/2;if(a==e)e=0;else{var p=a-e;e=.5<m?p/(2-a-e):p/(a+e);switch(a){case c:g=(b-d)/p+(b<d?6:0);break;case b:g=(d-c)/p+2;break;case d:g=(c-b)/p+4}g/=6}return[g,e,m]}function Q(d,c,b){0>b&&(b+=1);1<b&&--b;return b<1/6?d+6*(c-d)*b:.5>b?c:b<2/3?d+(c-d)*(2/3-b)*6:d}function Z(d){var c=d[2];if(0==d[1])return c=Math.round(255*c),[c,c,c];var b=d[1];b=.5>c?c*(1+b):c+b-c*b;var a=2*c-b;c=Q(a,b,d[0]+1/3);var e=Q(a,b,d[0]);d=Q(a,b,d[0]-1/3);return[Math.round(255*
c),Math.round(255*e),Math.round(255*d)]}function la(d,c,b){var a=d.createShader(d.VERTEX_SHADER);d.shaderSource(a,c);d.compileShader(a);if(!d.getShaderParameter(a,d.COMPILE_STATUS))throw Error(d.getShaderInfoLog(a)||"");c=d.createShader(d.FRAGMENT_SHADER);d.shaderSource(c,b);d.compileShader(c);if(!d.getShaderParameter(c,d.COMPILE_STATUS))throw Error(d.getShaderInfoLog(c)||"");b=d.createProgram();d.attachShader(b,a);d.attachShader(b,c);d.linkProgram(b);if(!d.getProgramParameter(b,d.LINK_STATUS))throw Error(d.getProgramInfoLog(b)||
"");return b}function ma(d){var c=new Float32Array([0,0,1,0,0,1,1,1]),b=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,b);d.bufferData(d.ARRAY_BUFFER,c,d.STATIC_DRAW);d.enableVertexAttribArray(0);d.vertexAttribPointer(0,2,d.FLOAT,!1,0,0)}function L(d){if(!(d in R)){if("transparent"==d)var c=[0,0,0,0];else if(-1<d.indexOf("rgba")){c=(d.match(/[\d.]+/g)||[]).map(Number);for(var b=0;3>b;b++)c[b]/=255}else c=z(d).map(function(a){return a/255}),c.push(1);R[d]=c}return R[d]}function S(d){d=z(d);return 36*
Math.floor(.0234375*d[0])+6*Math.floor(.0234375*d[1])+1*Math.floor(.0234375*d[2])+16}function T(d,c){var b=[],a=0;d.replace(na,function(e,m,p,h){var g=d.substring(a,h);g.length&&b.push({type:0,value:g});b.push({type:"c"==m?2:3,value:p.trim()});a=h+e.length;return""});var e=d.substring(a);e.length&&b.push({type:0,value:e});return oa(b,c)}function oa(d,c){c||(c=Infinity);for(var b=0,a=0,e=-1;b<d.length;){var g=d[b];1==g.type&&(a=0,e=-1);if(0!=g.type)b++;else{for(;0==a&&" "==g.value.charAt(0);)g.value=
g.value.substring(1);var m=g.value.indexOf("\n");if(-1!=m){g.value=M(d,b,m,!0);for(m=g.value.split("");m.length&&" "==m[m.length-1];)m.pop();g.value=m.join("")}if(g.value.length){if(a+g.value.length>c){for(m=-1;;){var p=g.value.indexOf(" ",m+1);if(-1==p)break;if(a+p>c)break;m=p}-1!=m?g.value=M(d,b,m,!0):-1!=e?(b=d[e],g=b.value.lastIndexOf(" "),b.value=M(d,e,g,!0),b=e):g.value=M(d,b,c-a,!1)}else a+=g.value.length,-1!=g.value.indexOf(" ")&&(e=b);b++}else d.splice(b,1)}}d.push({type:1});c=null;for(a=
0;a<d.length;a++)switch(e=d[a],e.type){case 0:c=e;break;case 1:if(c){for(e=c.value.split("");e.length&&" "==e[e.length-1];)e.pop();c.value=e.join("")}c=null}d.pop();return d}function M(d,c,b,a){a={type:0,value:d[c].value.substring(b+(a?1:0))};d.splice(c+1,0,{type:1},a);return d[c].value.substring(0,b)}function ba(d,c,b){b[c[d+1]]=b[d];c[b[d]]=c[d+1];b[d]=d+1;c[d+1]=d}function ca(d,c,b){b[c[d]]=b[d];c[b[d]]=c[d];b[d]=d;c[d]=d}var r=(new (function(){function d(){this._c=this._s2=this._s1=this._s0=this._seed=
0}var c=d.prototype;c.getSeed=function(){return this._seed};c.setSeed=function(b){this._seed=b=1>b?1/b:b;this._s0=2.3283064365386963E-10*(b>>>0);b=69069*b+1>>>0;this._s1=2.3283064365386963E-10*b;this._s2=2.3283064365386963E-10*(69069*b+1>>>0);this._c=1;return this};c.getUniform=function(){var b=2091639*this._s0+2.3283064365386963E-10*this._c;this._s0=this._s1;this._s1=this._s2;this._c=b|0;return this._s2=b-this._c};c.getUniformInt=function(b,a){var e=Math.max(b,a);b=Math.min(b,a);return Math.floor(this.getUniform()*
(e-b+1))+b};c.getNormal=function(b,a){void 0===b&&(b=0);void 0===a&&(a=1);do{var e=2*this.getUniform()-1;var g=2*this.getUniform()-1;g=e*e+g*g}while(1<g||0==g);return b+e*Math.sqrt(-2*Math.log(g)/g)*a};c.getPercentage=function(){return 1+Math.floor(100*this.getUniform())};c.getItem=function(b){return b.length?b[Math.floor(this.getUniform()*b.length)]:null};c.shuffle=function(b){var a=[];for(b=b.slice();b.length;){var e=b.indexOf(this.getItem(b));a.push(b.splice(e,1)[0])}return a};c.getWeightedValue=
function(b){var a=0;for(g in b)a+=b[g];a*=this.getUniform();var e;var g=0;for(e in b)if(g+=b[e],a<g)break;return e};c.getState=function(){return[this._s0,this._s1,this._s2,this._c]};c.setState=function(b){this._s0=b[0];this._s1=b[1];this._s2=b[2];this._c=b[3];return this};c.clone=function(){return(new d).setState(this.getState())};return d}())).setSeed(Date.now()),I=function(){function d(){}var c=d.prototype;c.getContainer=function(){return null};c.setOptions=function(b){this._options=b};return d}(),
U=function(d){function c(){var a=d.call(this)||this;a._ctx=document.createElement("canvas").getContext("2d");return a}_inheritsLoose(c,d);var b=c.prototype;b.schedule=function(a){requestAnimationFrame(a)};b.getContainer=function(){return this._ctx.canvas};b.setOptions=function(a){d.prototype.setOptions.call(this,a);a=(a.fontStyle?a.fontStyle+" ":"")+" "+a.fontSize+"px "+a.fontFamily;this._ctx.font=a;this._updateSize();this._ctx.font=a;this._ctx.textAlign="center";this._ctx.textBaseline="middle"};
b.clear=function(){this._ctx.fillStyle=this._options.bg;this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)};b.eventToPosition=function(a,e){var g=this._ctx.canvas,b=g.getBoundingClientRect();a-=b.left;e-=b.top;a*=g.width/b.width;e*=g.height/b.height;return 0>a||0>e||a>=g.width||e>=g.height?[-1,-1]:this._normalizedEventToPosition(a,e)};return c}(I);u.map={s:"toString"};var pa=Object.freeze({mod:k,clamp:n,capitalize:q,format:u}),da=function(d){function c(){var a=d.call(this)||this;
a._spacingX=0;a._spacingY=0;a._hexSize=0;return a}_inheritsLoose(c,d);var b=c.prototype;b.draw=function(a,e){var g=a[2],b=a[3],p=a[4];a=[(a[0]+1)*this._spacingX,a[1]*this._spacingY+this._hexSize];this._options.transpose&&a.reverse();e&&(this._ctx.fillStyle=p,this._fill(a[0],a[1]));if(g)for(this._ctx.fillStyle=b,e=[].concat(g),g=0;g<e.length;g++)this._ctx.fillText(e[g],a[0],Math.ceil(a[1]))};b.computeSize=function(a,e){this._options.transpose&&(a+=e,e=a-e,a-=e);return[Math.floor(a/this._spacingX)-
1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]};b.computeFontSize=function(a,e){this._options.transpose&&(a+=e,e=a-e,a-=e);a=Math.min(2*a/((this._options.width+1)*Math.sqrt(3))-1,e/(2+1.5*(this._options.height-1)));e=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;var g=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=e;a=Math.floor(a)+1;return Math.ceil(2*a/(this._options.spacing*(1+g/100/Math.sqrt(3))))-1};b._normalizedEventToPosition=function(a,e){if(this._options.transpose){a+=
e;e=a-e;a-=e;var g=this._ctx.canvas.width}else g=this._ctx.canvas.height;e=Math.floor(e/(g/this._options.height));k(e,2)?(a-=this._spacingX,a=1+2*Math.floor(a/(2*this._spacingX))):a=2*Math.floor(a/(2*this._spacingX));return[a,e]};b._fill=function(a,e){var g=this._hexSize,b=this._options.border,p=this._ctx;p.beginPath();this._options.transpose?(p.moveTo(a-g+b,e),p.lineTo(a-g/2+b,e+this._spacingX-b),p.lineTo(a+g/2-b,e+this._spacingX-b),p.lineTo(a+g-b,e),p.lineTo(a+g/2-b,e-this._spacingX+b),p.lineTo(a-
g/2+b,e-this._spacingX+b),p.lineTo(a-g+b,e)):(p.moveTo(a,e-g+b),p.lineTo(a+this._spacingX-b,e-g/2+b),p.lineTo(a+this._spacingX-b,e+g/2-b),p.lineTo(a,e+g-b),p.lineTo(a-this._spacingX+b,e+g/2-b),p.lineTo(a-this._spacingX+b,e-g/2+b),p.lineTo(a,e-g+b));p.fill()};b._updateSize=function(){var a=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._hexSize=Math.floor(a.spacing*(a.fontSize+e/Math.sqrt(3))/2);this._spacingX=this._hexSize*Math.sqrt(3)/2;this._spacingY=1.5*this._hexSize;if(a.transpose){e=
"height";var g="width"}else e="width",g="height";this._ctx.canvas[e]=Math.ceil((a.width+1)*this._spacingX);this._ctx.canvas[g]=Math.ceil((a.height-1)*this._spacingY+2*this._hexSize)};return c}(U),ea=function(){var d=function(c){function b(){var a=c.call(this)||this;a._spacingX=0;a._spacingY=0;a._canvasCache={};return a}_inheritsLoose(b,c);var a=b.prototype;a.setOptions=function(a){c.prototype.setOptions.call(this,a);this._canvasCache={}};a.draw=function(a,g){b.cache?this._drawWithCache(a):this._drawNoCache(a,
g)};a._drawWithCache=function(a){var e=a[0],b=a[1],p=a[2],h=a[3],c=a[4];a=""+p+h+c;if(a in this._canvasCache)var d=this._canvasCache[a];else{var f=this._options.border;d=document.createElement("canvas");var y=d.getContext("2d");d.width=this._spacingX;d.height=this._spacingY;y.fillStyle=c;y.fillRect(f,f,d.width-f,d.height-f);if(p)for(y.fillStyle=h,y.font=this._ctx.font,y.textAlign="center",y.textBaseline="middle",p=[].concat(p),h=0;h<p.length;h++)y.fillText(p[h],this._spacingX/2,Math.ceil(this._spacingY/
2));this._canvasCache[a]=d}this._ctx.drawImage(d,e*this._spacingX,b*this._spacingY)};a._drawNoCache=function(a,g){var e=a[0],b=a[1],h=a[2],c=a[3];a=a[4];g&&(g=this._options.border,this._ctx.fillStyle=a,this._ctx.fillRect(e*this._spacingX+g,b*this._spacingY+g,this._spacingX-g,this._spacingY-g));if(h)for(this._ctx.fillStyle=c,h=[].concat(h),c=0;c<h.length;c++)this._ctx.fillText(h[c],(e+.5)*this._spacingX,Math.ceil((b+.5)*this._spacingY))};a.computeSize=function(a,g){return[Math.floor(a/this._spacingX),
Math.floor(g/this._spacingY)]};a.computeFontSize=function(a,g){a=Math.floor(a/this._options.width);g=Math.floor(g/this._options.height);var e=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;var b=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=e;a=b/100*g/a;1<a&&(g=Math.floor(g/a));return Math.floor(g/this._options.spacing)};a._normalizedEventToPosition=function(a,g){return[Math.floor(a/this._spacingX),Math.floor(g/this._spacingY)]};a._updateSize=function(){var a=this._options,
g=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(a.spacing*g);this._spacingY=Math.ceil(a.spacing*a.fontSize);a.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY));this._ctx.canvas.width=a.width*this._spacingX;this._ctx.canvas.height=a.height*this._spacingY};return b}(U);d.cache=!1;return d}(),fa=function(d){function c(){var a=d.call(this)||this;a._colorCanvas=document.createElement("canvas");return a}_inheritsLoose(c,d);var b=c.prototype;
b.draw=function(a,e){var g=a[0],b=a[1],p=a[2],h=a[3],c=a[4];a=this._options.tileWidth;var d=this._options.tileHeight;e&&(this._options.tileColorize?this._ctx.clearRect(g*a,b*d,a,d):(this._ctx.fillStyle=c,this._ctx.fillRect(g*a,b*d,a,d)));if(p)for(e=[].concat(p),h=[].concat(h),c=[].concat(c),p=0;p<e.length;p++){var f=this._options.tileMap[e[p]];if(!f)throw Error('Char "'+e[p]+'" not found in tileMap');if(this._options.tileColorize){var y=this._colorCanvas,t=y.getContext("2d");t.globalCompositeOperation=
"source-over";t.clearRect(0,0,a,d);var n=h[p],k=c[p];t.drawImage(this._options.tileSet,f[0],f[1],a,d,0,0,a,d);"transparent"!=n&&(t.fillStyle=n,t.globalCompositeOperation="source-atop",t.fillRect(0,0,a,d));"transparent"!=k&&(t.fillStyle=k,t.globalCompositeOperation="destination-over",t.fillRect(0,0,a,d));this._ctx.drawImage(y,g*a,b*d,a,d)}else this._ctx.drawImage(this._options.tileSet,f[0],f[1],a,d,g*a,b*d,a,d)}};b.computeSize=function(a,e){return[Math.floor(a/this._options.tileWidth),Math.floor(e/
this._options.tileHeight)]};b.computeFontSize=function(){throw Error("Tile backend does not understand font size");};b._normalizedEventToPosition=function(a,e){return[Math.floor(a/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};b._updateSize=function(){var a=this._options;this._ctx.canvas.width=a.width*a.tileWidth;this._ctx.canvas.height=a.height*a.tileHeight;this._colorCanvas.width=a.tileWidth;this._colorCanvas.height=a.tileHeight};return c}(U),O={black:[0,0,0],navy:[0,0,128],darkblue:[0,
0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,
105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,
255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,
216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,
165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,
235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,
235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]},qa=Object.freeze({fromString:z,add:function(d){for(var c=d.slice(),b=arguments.length,a=Array(1<b?b-1:0),e=1;e<b;e++)a[e-1]=arguments[e];for(b=0;3>b;b++)for(e=0;e<a.length;e++)c[b]+=a[e][b];return c},add_:D,multiply:function(d){for(var c=
d.slice(),b=arguments.length,a=Array(1<b?b-1:0),e=1;e<b;e++)a[e-1]=arguments[e];for(b=0;3>b;b++){for(e=0;e<a.length;e++)c[b]*=a[e][b]/255;c[b]=Math.round(c[b])}return c},multiply_:function(d){for(var c=arguments.length,b=Array(1<c?c-1:0),a=1;a<c;a++)b[a-1]=arguments[a];for(c=0;3>c;c++){for(a=0;a<b.length;a++)d[c]*=b[a][c]/255;d[c]=Math.round(d[c])}return d},interpolate:X,lerp:X,interpolateHSL:Y,lerpHSL:Y,randomize:function(d,c){c instanceof Array||(c=Math.round(r.getNormal(0,c)));d=d.slice();for(var b=
0;3>b;b++)d[b]+=c instanceof Array?Math.round(r.getNormal(0,c[b])):c;return d},rgb2hsl:P,hsl2rgb:Z,toRGB:function(d){return"rgb("+d.map(function(c){return n(c,0,255)}).join(",")+")"},toHex:function(d){return"#"+d.map(function(c){return n(c,0,255).toString(16).padStart(2,"0")}).join("")}}),ha=function(d){function c(){var a=d.call(this)||this;a._uniforms={};try{a._gl=a._initWebGL()}catch(e){alert(e.message)}return a}_inheritsLoose(c,d);c.isSupported=function(){return!!document.createElement("canvas").getContext("webgl2",
{preserveDrawingBuffer:!0})};var b=c.prototype;b.schedule=function(a){requestAnimationFrame(a)};b.getContainer=function(){return this._gl.canvas};b.setOptions=function(a){var e=this;d.prototype.setOptions.call(this,a);this._updateSize();var g=this._options.tileSet;g&&"complete"in g&&!g.complete?g.addEventListener("load",function(){return e._updateTexture(g)}):this._updateTexture(g)};b.draw=function(a,e){var g=this._gl,b=this._options,p=a[0],h=a[1],c=a[2],d=a[3];a=a[4];g.scissor(p*b.tileWidth,g.canvas.height-
(h+1)*b.tileHeight,b.tileWidth,b.tileHeight);e&&(b.tileColorize?g.clearColor(0,0,0,0):g.clearColor.apply(g,L(a)),g.clear(g.COLOR_BUFFER_BIT));if(c)for(e=[].concat(c),c=[].concat(a),d=[].concat(d),g.uniform2fv(this._uniforms.targetPosRel,[p,h]),p=0;p<e.length;p++){h=this._options.tileMap[e[p]];if(!h)throw Error('Char "'+e[p]+'" not found in tileMap');g.uniform1f(this._uniforms.colorize,b.tileColorize?1:0);g.uniform2fv(this._uniforms.tilesetPosAbs,h);b.tileColorize&&(g.uniform4fv(this._uniforms.tint,
L(d[p])),g.uniform4fv(this._uniforms.bg,L(c[p])));g.drawArrays(g.TRIANGLE_STRIP,0,4)}};b.clear=function(){var a=this._gl;a.clearColor.apply(a,L(this._options.bg));a.scissor(0,0,a.canvas.width,a.canvas.height);a.clear(a.COLOR_BUFFER_BIT)};b.computeSize=function(a,e){return[Math.floor(a/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};b.computeFontSize=function(){throw Error("Tile backend does not understand font size");};b.eventToPosition=function(a,e){var g=this._gl.canvas,b=g.getBoundingClientRect();
a-=b.left;e-=b.top;a*=g.width/b.width;e*=g.height/b.height;return 0>a||0>e||a>=g.width||e>=g.height?[-1,-1]:this._normalizedEventToPosition(a,e)};b._initWebGL=function(){var a=this,e=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=e;var g=la(e,ra,sa);e.useProgram(g);ma(e);ta.forEach(function(b){return a._uniforms[b]=e.getUniformLocation(g,b)});this._program=g;e.enable(e.BLEND);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);
e.enable(e.SCISSOR_TEST);return e};b._normalizedEventToPosition=function(a,e){return[Math.floor(a/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]};b._updateSize=function(){var a=this._gl,e=this._options,g=[e.width*e.tileWidth,e.height*e.tileHeight];a.canvas.width=g[0];a.canvas.height=g[1];a.viewport(0,0,g[0],g[1]);a.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]);a.uniform2fv(this._uniforms.targetSize,g)};b._updateTexture=function(a){var e=this._gl,g=e.createTexture();
e.bindTexture(e.TEXTURE_2D,g);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a)};return c}(I),ta="targetPosRel tilesetPosAbs tileSize targetSize colorize bg tint".split(" "),ra="#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}",
sa="#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}",
R={},ia=function(d){function c(){var a=d.call(this)||this;a._offset=[0,0];a._cursor=[-1,-1];a._lastColor="";return a}_inheritsLoose(c,d);var b=c.prototype;b.schedule=function(a){setTimeout(a,1E3/60)};b.setOptions=function(a){d.prototype.setOptions.call(this,a);var e=[a.width,a.height];this._offset=this.computeSize().map(function(a,b){return Math.floor((a-e[b])/2)})};b.clear=function(){process.stdout.write("\u001b[0;48;5;"+S(this._options.bg)+"m\u001b[2J")};b.draw=function(a,e){var g=a[2],b=a[3],p=
a[4],h=this._offset[0]+a[0],c=this._offset[1]+a[1];a=this.computeSize();if(!(0>h||h>=a[0]||0>c||c>=a[1])){if(h!==this._cursor[0]||c!==this._cursor[1])process.stdout.write("\u001b["+(c+1)+";"+(h+1)+"H"),this._cursor[0]=h,this._cursor[1]=c;e&&(g||(g=" "));g&&(e="\u001b[0;38;5;"+S(b)+";48;5;"+S(p)+"m",e!==this._lastColor&&(process.stdout.write(e),this._lastColor=e),"\t"!=g&&(g=[].concat(g),process.stdout.write(g[0])),this._cursor[0]++,this._cursor[0]>=a[0]&&(this._cursor[0]=0,this._cursor[1]++))}};b.computeFontSize=
function(){throw Error("Terminal backend has no notion of font size");};b.eventToPosition=function(a,e){return[a,e]};b.computeSize=function(){return[process.stdout.columns,process.stdout.rows]};return c}(I),na=/%([bc]){([^}]*)}/g;I=Object.freeze({TYPE_TEXT:0,TYPE_NEWLINE:1,TYPE_FG:2,TYPE_BG:3,measure:function(d,c){var b={width:0,height:1};d=T(d,c);for(var a=c=0;a<d.length;a++){var e=d[a];switch(e.type){case 0:c+=e.value.length;break;case 1:b.height++,b.width=Math.max(b.width,c),c=0}}b.width=Math.max(b.width,
c);return b},tokenize:T});var v={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},ua={hex:da,rect:ea,tile:fa,"tile-gl":ha,term:ia},va={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1},wa=function(){var d=function(){function c(a){void 0===a&&(a=
{});this._data={};this._dirty=!1;this._options={};a=Object.assign({},va,a);this.setOptions(a);this.DEBUG=this.DEBUG.bind(this);this._tick=this._tick.bind(this);this._backend.schedule(this._tick)}var b=c.prototype;b.DEBUG=function(a,e,b){var g=[this._options.bg,this._options.fg];this.draw(a,e,null,null,g[b%g.length])};b.clear=function(){this._data={};this._dirty=!0};b.setOptions=function(a){Object.assign(this._options,a);if(a.width||a.height||a.fontSize||a.fontFamily||a.spacing||a.layout)a.layout&&
(this._backend=new ua[a.layout]),this._backend.setOptions(this._options),this._dirty=!0;return this};b.getOptions=function(){return this._options};b.getContainer=function(){return this._backend.getContainer()};b.computeSize=function(a,e){return this._backend.computeSize(a,e)};b.computeFontSize=function(a,e){return this._backend.computeFontSize(a,e)};b.computeTileSize=function(a,e){return[Math.floor(a/this._options.width),Math.floor(e/this._options.height)]};b.eventToPosition=function(a){if("touches"in
a){var e=a.touches[0].clientX;a=a.touches[0].clientY}else e=a.clientX,a=a.clientY;return this._backend.eventToPosition(e,a)};b.draw=function(a,e,b,m,p){m||(m=this._options.fg);p||(p=this._options.bg);var g=a+","+e;this._data[g]=[a,e,b,m,p];!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[g]=!0)};b.drawText=function(a,e,b,m){var g=null,c=null,d=a,l=1;m||(m=this._options.width-a);for(b=T(b,m);b.length;)switch(m=b.shift(),m.type){case 0:for(var f,y=!1,t,n=!1,k=0;k<m.value.length;k++){f=m.value.charCodeAt(k);
var r=m.value.charAt(k);if("term"===this._options.layout&&(t=f>>8,17===t||46<=t&&159>=t||172<=t&&215>=t||43360<=f&&43391>=f)){this.draw(d+0,e,r,g,c);this.draw(d+1,e,"\t",g,c);d+=2;continue}t=65280<f&&65377>f||65500<f&&65512>f||65518<f;f=32==r.charCodeAt(0)||12288==r.charCodeAt(0);!n||t||f||d++;t&&!y&&d++;this.draw(d++,e,r,g,c);y=f;n=t}break;case 2:g=m.value||null;break;case 3:c=m.value||null;break;case 1:d=a,e++,l++}return l};b._tick=function(){this._backend.schedule(this._tick);if(this._dirty){if(!0===
this._dirty){this._backend.clear();for(var a in this._data)this._draw(a,!1)}else for(var e in this._dirty)this._draw(e,!0);this._dirty=!1}};b._draw=function(a,e){a=this._data[a];a[4]!=this._options.bg&&(e=!0);this._backend.draw(a,e)};return c}();d.Rect=ea;d.Hex=da;d.Tile=fa;d.TileGL=ha;d.Term=ia;return d}(),xa=function(){function d(b){this._options={words:!1,order:3,prior:.001};Object.assign(this._options,b);this._suffix=this._boundary=String.fromCharCode(0);this._prefix=[];for(b=0;b<this._options.order;b++)this._prefix.push(this._boundary);
this._priorValues={};this._priorValues[this._boundary]=this._options.prior;this._data={}}var c=d.prototype;c.clear=function(){this._data={};this._priorValues={}};c.generate=function(){for(var b=[this._sample(this._prefix)];b[b.length-1]!=this._boundary;)b.push(this._sample(b));return this._join(b.slice(0,-1))};c.observe=function(b){b=this._split(b);for(var a=0;a<b.length;a++)this._priorValues[b[a]]=this._options.prior;b=this._prefix.concat(b).concat(this._suffix);for(a=this._options.order;a<b.length;a++)for(var e=
b.slice(a-this._options.order,a),g=b[a],m=0;m<e.length;m++){var p=e.slice(m);this._observeEvent(p,g)}};c.getStats=function(){var b=[],a=Object.keys(this._priorValues).length;a--;b.push("distinct samples: "+a);a=Object.keys(this._data).length;var e=0,g;for(g in this._data)e+=Object.keys(this._data[g]).length;b.push("dictionary size (contexts): "+a);b.push("dictionary size (events): "+e);return b.join(", ")};c._split=function(b){return b.split(this._options.words?/\s+/:"")};c._join=function(b){return b.join(this._options.words?
" ":"")};c._observeEvent=function(b,a){b=this._join(b);b in this._data||(this._data[b]={});b=this._data[b];a in b||(b[a]=0);b[a]++};c._sample=function(b){b=this._backoff(b);b=this._join(b);b=this._data[b];var a={};if(this._options.prior){for(var e in this._priorValues)a[e]=this._priorValues[e];for(var g in b)a[g]+=b[g]}else a=b;return r.getWeightedValue(a)};c._backoff=function(b){for(b.length>this._options.order?b=b.slice(-this._options.order):b.length<this._options.order&&(b=this._prefix.slice(0,
this._options.order-b.length).concat(b));!(this._join(b)in this._data)&&0<b.length;)b=b.slice(1);return b};return d}(),ja=function(){function d(){this.heap=[];this.timestamp=0}var c=d.prototype;c.lessThan=function(b,a){return b.key==a.key?b.timestamp<a.timestamp:b.key<a.key};c.shift=function(b){this.heap=this.heap.map(function(a){return{key:a.key+b,value:a.value,timestamp:a.timestamp}})};c.len=function(){return this.heap.length};c.push=function(b,a){this.timestamp+=1;var e=this.len();this.heap.push({value:b,
timestamp:this.timestamp,key:a});this.updateUp(e)};c.pop=function(){if(0==this.len())throw Error("no element to pop");var b=this.heap[0];1<this.len()?(this.heap[0]=this.heap.pop(),this.updateDown(0)):this.heap.pop();return b};c.find=function(b){for(var a=0;a<this.len();a++)if(b==this.heap[a].value)return this.heap[a];return null};c.remove=function(b){for(var a=null,e=0;e<this.len();e++)b==this.heap[e].value&&(a=e);if(null===a)return!1;1<this.len()?(e=this.heap.pop(),e.value!=b&&(this.heap[a]=e,this.updateDown(a))):
this.heap.pop();return!0};c.parentNode=function(b){return Math.floor((b-1)/2)};c.leftChildNode=function(b){return 2*b+1};c.rightChildNode=function(b){return 2*b+2};c.existNode=function(b){return 0<=b&&b<this.heap.length};c.swap=function(b,a){var e=this.heap[b];this.heap[b]=this.heap[a];this.heap[a]=e};c.minNode=function(b){var a=b.filter(this.existNode.bind(this));b=a[0];a=_createForOfIteratorHelperLoose(a);for(var e;!(e=a()).done;)e=e.value,this.lessThan(this.heap[e],this.heap[b])&&(b=e);return b};
c.updateUp=function(b){if(0!=b){var a=this.parentNode(b);this.existNode(a)&&this.lessThan(this.heap[b],this.heap[a])&&(this.swap(b,a),this.updateUp(a))}};c.updateDown=function(b){var a=this.leftChildNode(b),e=this.rightChildNode(b);this.existNode(a)&&(a=this.minNode([b,a,e]),a!=b&&(this.swap(b,a),this.updateDown(a)))};c.debugPrint=function(){console.log(this.heap)};return d}(),ka=function(){function d(){this._time=0;this._events=new ja}var c=d.prototype;c.getTime=function(){return this._time};c.clear=
function(){this._events=new ja;return this};c.add=function(b,a){this._events.push(b,a)};c.get=function(){if(!this._events.len())return null;var b=this._events.pop(),a=b.key;b=b.value;0<a&&(this._time+=a,this._events.shift(-a));return b};c.getEventTime=function(b){if(b=this._events.find(b))return b.key};c.remove=function(b){return this._events.remove(b)};return d}(),B=function(){function d(){this._queue=new ka;this._repeat=[];this._current=null}var c=d.prototype;c.getTime=function(){return this._queue.getTime()};
c.add=function(b,a){a&&this._repeat.push(b);return this};c.getTimeOf=function(b){return this._queue.getEventTime(b)};c.clear=function(){this._queue.clear();this._repeat=[];this._current=null;return this};c.remove=function(b){var a=this._queue.remove(b),e=this._repeat.indexOf(b);-1!=e&&this._repeat.splice(e,1);this._current==b&&(this._current=null);return a};c.next=function(){return this._current=this._queue.get()};return d}(),V=function(d){function c(){return d.apply(this,arguments)||this}_inheritsLoose(c,
d);var b=c.prototype;b.add=function(a,e){this._queue.add(a,0);return d.prototype.add.call(this,a,e)};b.next=function(){null!==this._current&&-1!=this._repeat.indexOf(this._current)&&this._queue.add(this._current,0);return d.prototype.next.call(this)};return c}(B),J=function(d){function c(){return d.apply(this,arguments)||this}_inheritsLoose(c,d);var b=c.prototype;b.add=function(a,e,b){this._queue.add(a,void 0!==b?b:1/a.getSpeed());return d.prototype.add.call(this,a,e)};b.next=function(){this._current&&
-1!=this._repeat.indexOf(this._current)&&this._queue.add(this._current,1/this._current.getSpeed());return d.prototype.next.call(this)};return c}(B);B=function(d){function c(){var a=d.call(this)||this;a._defaultDuration=1;a._duration=a._defaultDuration;return a}_inheritsLoose(c,d);var b=c.prototype;b.add=function(a,e,b){this._queue.add(a,b||this._defaultDuration);return d.prototype.add.call(this,a,e)};b.clear=function(){this._duration=this._defaultDuration;return d.prototype.clear.call(this)};b.remove=
function(a){a==this._current&&(this._duration=this._defaultDuration);return d.prototype.remove.call(this,a)};b.next=function(){null!==this._current&&-1!=this._repeat.indexOf(this._current)&&(this._queue.add(this._current,this._duration||this._defaultDuration),this._duration=this._defaultDuration);return d.prototype.next.call(this)};b.setDuration=function(a){this._current&&(this._duration=a);return this};return c}(B);V={Simple:V,Speed:J,Action:B};var w=function(){function d(c,b){void 0===b&&(b={});
this._lightPasses=c;this._options=Object.assign({topology:8},b)}d.prototype._getCircle=function(c,b,a){var e=[];switch(this._options.topology){case 4:var g=1;var m=[0,1];var p=[v[8][7],v[8][1],v[8][3],v[8][5]];break;case 6:p=v[6];g=1;m=[-1,1];break;case 8:p=v[4];g=2;m=[-1,1];break;default:throw Error("Incorrect topology for FOV computation");}c+=m[0]*a;b+=m[1]*a;for(m=0;m<p.length;m++)for(var h=0;h<a*g;h++)e.push([c,b]),c+=p[m][0],b+=p[m][1];return e};return d}();J=function(d){function c(){return d.apply(this,
arguments)||this}_inheritsLoose(c,d);var b=c.prototype;b.compute=function(a,e,b,m){m(a,e,0,1);if(this._lightPasses(a,e))for(var g=[],c,d,f,x,y,n=1;n<=b;n++)for(var k=this._getCircle(a,e,n),r=360/k.length,q=0;q<k.length;q++)if(f=k[q][0],x=k[q][1],c=r*(q-.5),d=c+r,y=!this._lightPasses(f,x),this._visibleCoords(Math.floor(c),Math.ceil(d),y,g)&&m(f,x,n,1),2==g.length&&0==g[0]&&360==g[1])return};b._visibleCoords=function(a,e,b,m){if(0>a)return e=this._visibleCoords(0,e,b,m),a=this._visibleCoords(360+a,
360,b,m),e||a;for(var g=0;g<m.length&&m[g]<a;)g++;if(g==m.length)return b&&m.push(a,e),!0;var c=0;if(g%2){for(;g<m.length&&m[g]<e;)g++,c++;if(0==c)return!1;b&&(c%2?m.splice(g-c,c,e):m.splice(g-c,c))}else{for(;g<m.length&&m[g]<e;)g++,c++;if(a==m[g-c]&&1==c)return!1;b&&(c%2?m.splice(g-c,c,a):m.splice(g-c,c,a,e))}return!0};return c}(w);B=function(d){function c(){return d.apply(this,arguments)||this}_inheritsLoose(c,d);var b=c.prototype;b.compute=function(a,e,b,c){c(a,e,0,1);if(this._lightPasses(a,e))for(var g=
[],m,d,f,x,n,k=1;k<=b;k++)for(var r=this._getCircle(a,e,k),q=r.length,A=0;A<q;A++)if(m=r[A][0],d=r[A][1],x=[A?2*A-1:2*q-1,2*q],n=[2*A+1,2*q],f=!this._lightPasses(m,d),(f=this._checkVisibility(x,n,f,g))&&c(m,d,k,f),2==g.length&&0==g[0][0]&&g[1][0]==g[1][1])return};b._checkVisibility=function(a,e,b,c){if(a[0]>e[0])return a=this._checkVisibility(a,[a[1],a[1]],b,c),e=this._checkVisibility([0,1],e,b,c),(a+e)/2;for(var g=0,m=!1;g<c.length;){var d=c[g];d=d[0]*a[1]-a[0]*d[1];if(0<=d){0!=d||g%2||(m=!0);break}g++}d=
c.length;for(var f=!1;d--;){var x=c[d];x=e[0]*x[1]-x[0]*e[1];if(0<=x){0==x&&d%2&&(f=!0);break}}x=!0;g==d&&(m||f)?x=!1:m&&f&&g+1==d&&d%2?x=!1:g>d&&g%2&&(x=!1);if(!x)return 0;m=d-g+1;if(m%2)g%2?(d=c[g],d=(e[0]*d[1]-d[0]*e[1])/(d[1]*e[1]),b&&c.splice(g,m,e)):(d=c[d],d=(d[0]*a[1]-a[0]*d[1])/(a[1]*d[1]),b&&c.splice(g,m,a));else if(g%2)f=c[g],d=c[d],d=(d[0]*f[1]-f[0]*d[1])/(f[1]*d[1]),b&&c.splice(g,m);else return b&&c.splice(g,m,a,e),1;return d/((e[0]*a[1]-a[0]*e[1])/(a[1]*e[1]))};return c}(w);var E=[[-1,
0,0,1],[0,-1,1,0],[0,-1,-1,0],[-1,0,0,-1],[1,0,0,-1],[0,1,-1,0],[0,1,1,0],[1,0,0,1]];w=function(d){function c(){return d.apply(this,arguments)||this}_inheritsLoose(c,d);var b=c.prototype;b.compute=function(a,e,b,c){c(a,e,0,1);for(var g=0;g<E.length;g++)this._renderOctant(a,e,E[g],b,c)};b.compute180=function(a,e,b,c,d){d(a,e,0,1);var g=(c-1+8)%8,m=(c+1+8)%8;this._renderOctant(a,e,E[(c-2+8)%8],b,d);this._renderOctant(a,e,E[g],b,d);this._renderOctant(a,e,E[c],b,d);this._renderOctant(a,e,E[m],b,d)};b.compute90=
function(a,e,b,c,d){d(a,e,0,1);var g=(c-1+8)%8;this._renderOctant(a,e,E[c],b,d);this._renderOctant(a,e,E[g],b,d)};b._renderOctant=function(a,e,b,c,d){this._castVisibility(a,e,1,1,0,c+1,b[0],b[1],b[2],b[3],d)};b._castVisibility=function(a,e,b,c,d,h,aa,f,x,k,n){if(!(c<d))for(;b<=h;b++){for(var g=-b-1,m=-b,p=!1,l=0;0>=g;){g+=1;var y=a+g*aa+m*f,r=e+g*x+m*k,t=(g-.5)/(m+.5),q=(g+.5)/(m-.5);if(!(q>c)){if(t<d)break;g*g+m*m<h*h&&n(y,r,b,1);p?this._lightPasses(y,r)?(p=!1,c=l):l=q:!this._lightPasses(y,r)&&b<
h&&(p=!0,this._castVisibility(a,e,b+1,c,t,h,aa,f,x,k,n),l=q)}}if(p)break}};return c}(w);J={DiscreteShadowcasting:J,PreciseShadowcasting:B,RecursiveShadowcasting:w};w=function(){function d(c,b){void 0===c&&(c=80);void 0===b&&(b=25);this._width=c;this._height=b}d.prototype._fillMap=function(c){for(var b=[],a=0;a<this._width;a++){b.push([]);for(var e=0;e<this._height;e++)b[a].push(c)}return b};return d}();B=function(d){function c(){return d.apply(this,arguments)||this}_inheritsLoose(c,d);c.prototype.create=
function(b){for(var a=this._width-1,e=this._height-1,g=0;g<=a;g++)for(var c=0;c<=e;c++)b(g,c,g&&c&&g<a&&c<e?0:1);return this};return c}(w);var H=function(d){function c(a,e){a=d.call(this,a,e)||this;a._rooms=[];a._corridors=[];return a}_inheritsLoose(c,d);var b=c.prototype;b.getRooms=function(){return this._rooms};b.getCorridors=function(){return this._corridors};return c}(w),F=function(){},N=function(d){function c(a,e,b,c,p,h){var g=d.call(this)||this;g._x1=a;g._y1=e;g._x2=b;g._y2=c;g._doors={};void 0!==
p&&void 0!==h&&g.addDoor(p,h);return g}_inheritsLoose(c,d);c.createRandomAt=function(a,e,b,c,d){var g=d.roomWidth[0],m=d.roomWidth[1],p=r.getUniformInt(g,m);g=d.roomHeight[0];m=d.roomHeight[1];d=r.getUniformInt(g,m);if(1==b)return b=e-Math.floor(r.getUniform()*d),new this(a+1,b,a+p,b+d-1,a,e);if(-1==b)return b=e-Math.floor(r.getUniform()*d),new this(a-p,b,a-1,b+d-1,a,e);if(1==c)return b=a-Math.floor(r.getUniform()*p),new this(b,e+1,b+p-1,e+d,a,e);if(-1==c)return b=a-Math.floor(r.getUniform()*p),new this(b,
e-d,b+p-1,e-1,a,e);throw Error("dx or dy must be 1 or -1");};c.createRandomCenter=function(a,e,b){var g=b.roomWidth[0],c=b.roomWidth[1],d=r.getUniformInt(g,c);g=b.roomHeight[0];c=b.roomHeight[1];b=r.getUniformInt(g,c);a-=Math.floor(r.getUniform()*d);e-=Math.floor(r.getUniform()*b);return new this(a,e,a+d-1,e+b-1)};c.createRandom=function(a,e,b){var g=b.roomWidth[0],c=b.roomWidth[1],d=r.getUniformInt(g,c);g=b.roomHeight[0];c=b.roomHeight[1];b=r.getUniformInt(g,c);a=a-d-1;e=e-b-1;a=1+Math.floor(r.getUniform()*
a);e=1+Math.floor(r.getUniform()*e);return new this(a,e,a+d-1,e+b-1)};var b=c.prototype;b.addDoor=function(a,e){this._doors[a+","+e]=1;return this};b.getDoors=function(a){for(var e in this._doors){var b=e.split(",");a(parseInt(b[0]),parseInt(b[1]))}return this};b.clearDoors=function(){this._doors={};return this};b.addDoors=function(a){for(var e=this._x1-1,b=this._x2+1,c=this._y1-1,d=this._y2+1,h=e;h<=b;h++)for(var f=c;f<=d;f++)if(h==e||h==b||f==c||f==d)a(h,f)||this.addDoor(h,f);return this};b.debug=
function(){console.log("room",this._x1,this._y1,this._x2,this._y2)};b.isValid=function(a,e){for(var b=this._x1-1,c=this._x2+1,d=this._y1-1,h=this._y2+1,f=b;f<=c;f++)for(var l=d;l<=h;l++)if(f==b||f==c||l==d||l==h){if(!a(f,l))return!1}else if(!e(f,l))return!1;return!0};b.create=function(a){for(var e=this._x1-1,b=this._x2+1,c=this._y1-1,d=this._y2+1,h,f=e;f<=b;f++)for(var l=c;l<=d;l++)h=f+","+l in this._doors?2:f==e||f==b||l==c||l==d?1:0,a(f,l,h)};b.getCenter=function(){return[Math.round((this._x1+this._x2)/
2),Math.round((this._y1+this._y2)/2)]};b.getLeft=function(){return this._x1};b.getRight=function(){return this._x2};b.getTop=function(){return this._y1};b.getBottom=function(){return this._y2};return c}(F),W=function(d){function c(a,e,b,c){var g=d.call(this)||this;g._startX=a;g._startY=e;g._endX=b;g._endY=c;g._endsWithAWall=!0;return g}_inheritsLoose(c,d);c.createRandomAt=function(a,b,g,c,d){d=r.getUniformInt(d.corridorLength[0],d.corridorLength[1]);return new this(a,b,a+g*d,b+c*d)};var b=c.prototype;
b.debug=function(){console.log("corridor",this._startX,this._startY,this._endX,this._endY)};b.isValid=function(a,b){var e=this._startX,c=this._startY,d=this._endX-e,h=this._endY-c,f=1+Math.max(Math.abs(d),Math.abs(h));d&&(d/=Math.abs(d));h&&(h/=Math.abs(h));for(var l=h,x=-d,k=!0,n=0;n<f;n++){var r=e+n*d,q=c+n*h;b(r,q)||(k=!1);a(r+l,q+x)||(k=!1);a(r-l,q-x)||(k=!1);if(!k){f=n;this._endX=r-d;this._endY=q-h;break}}if(0==f||1==f&&a(this._endX+d,this._endY+h))return!1;b=!a(this._endX+d+l,this._endY+h+x);
l=!a(this._endX+d-l,this._endY+h-x);this._endsWithAWall=a(this._endX+d,this._endY+h);return(b||l)&&this._endsWithAWall?!1:!0};b.create=function(a){var b=this._startX,g=this._startY,c=this._endX-b,d=this._endY-g,h=1+Math.max(Math.abs(c),Math.abs(d));c&&(c/=Math.abs(c));d&&(d/=Math.abs(d));for(var f=0;f<h;f++)a(b+f*c,g+f*d,0);return!0};b.createPriorityWalls=function(a){if(this._endsWithAWall){var b=this._endX-this._startX,g=this._endY-this._startY;b&&(b/=Math.abs(b));g&&(g/=Math.abs(g));var c=g,d=-b;
a(this._endX+b,this._endY+g);a(this._endX+c,this._endY+d);a(this._endX-c,this._endY-d)}};return c}(F);F=function(d){function c(a,b,g){a=d.call(this,a,b)||this;a._options={roomWidth:[3,9],roomHeight:[3,5],roomDugPercentage:.1,timeLimit:1E3};Object.assign(a._options,g);a._map=[];a._dug=0;a._roomAttempts=20;a._corridorAttempts=20;a._connected=[];a._unconnected=[];a._digCallback=a._digCallback.bind(_assertThisInitialized(a));a._canBeDugCallback=a._canBeDugCallback.bind(_assertThisInitialized(a));a._isWallCallback=
a._isWallCallback.bind(_assertThisInitialized(a));return a}_inheritsLoose(c,d);var b=c.prototype;b.create=function(a){for(var b=Date.now();;){if(Date.now()-b>this._options.timeLimit)return null;this._map=this._fillMap(1);this._dug=0;this._rooms=[];this._unconnected=[];this._generateRooms();if(!(2>this._rooms.length)&&this._generateCorridors())break}if(a)for(b=0;b<this._width;b++)for(var g=0;g<this._height;g++)a(b,g,this._map[b][g]);return this};b._generateRooms=function(){var a=this._width-2,b=this._height-
2;do{var g=this._generateRoom();if(this._dug/(a*b)>this._options.roomDugPercentage)break}while(g)};b._generateRoom=function(){for(var a=0;a<this._roomAttempts;){a++;var b=N.createRandom(this._width,this._height,this._options);if(b.isValid(this._isWallCallback,this._canBeDugCallback))return b.create(this._digCallback),this._rooms.push(b),b}return null};b._generateCorridors=function(){for(var a=0;a<this._corridorAttempts;){a++;this._corridors=[];this._map=this._fillMap(1);for(var b=0;b<this._rooms.length;b++){var g=
this._rooms[b];g.clearDoors();g.create(this._digCallback)}this._unconnected=r.shuffle(this._rooms.slice());this._connected=[];for(this._unconnected.length&&this._connected.push(this._unconnected.pop());;){b=r.getItem(this._connected);if(!b)break;b=this._closestRoom(this._unconnected,b);if(!b)break;g=this._closestRoom(this._connected,b);if(!g)break;if(!this._connectRooms(b,g))break;if(!this._unconnected.length)return!0}}return!1};b._closestRoom=function(a,b){var e=Infinity;b=b.getCenter();for(var c=
null,d=0;d<a.length;d++){var h=a[d],f=h.getCenter(),l=f[0]-b[0];f=f[1]-b[1];l=l*l+f*f;l<e&&(e=l,c=h)}return c};b._connectRooms=function(a,b){var e=a.getCenter(),c=b.getCenter(),d=c[0]-e[0];e=c[1]-e[1];if(Math.abs(d)<Math.abs(e)){d=0<e?2:0;var h=(d+2)%4;var f=b.getLeft();var l=b.getRight();e=0}else d=0<d?1:3,h=(d+2)%4,f=b.getTop(),l=b.getBottom(),e=1;d=this._placeInWall(a,d);if(!d)return!1;if(d[e]>=f&&d[e]<=l){c=d.slice();f=0;switch(h){case 0:f=b.getTop()-1;break;case 1:f=b.getRight()+1;break;case 2:f=
b.getBottom()+1;break;case 3:f=b.getLeft()-1}c[(e+1)%2]=f;this._digLine([d,c])}else if(d[e]<f-1||d[e]>l+1){c=d[e]-c[e];f=0;switch(h){case 0:case 1:f=0>c?3:1;break;case 2:case 3:f=0>c?1:3}c=this._placeInWall(b,(h+f)%4);if(!c)return!1;h=[0,0];h[e]=d[e];e=(e+1)%2;h[e]=c[e];this._digLine([d,h,c])}else{f=(e+1)%2;c=this._placeInWall(b,h);if(!c)return!1;h=Math.round((c[f]+d[f])/2);l=[0,0];var k=[0,0];l[e]=d[e];l[f]=h;k[e]=c[e];k[f]=h;this._digLine([d,l,k,c])}a.addDoor(d[0],d[1]);b.addDoor(c[0],c[1]);e=this._unconnected.indexOf(a);
-1!=e&&(this._unconnected.splice(e,1),this._connected.push(a));e=this._unconnected.indexOf(b);-1!=e&&(this._unconnected.splice(e,1),this._connected.push(b));return!0};b._placeInWall=function(a,b){var e=[0,0],c=[0,0],d=0;switch(b){case 0:c=[1,0];e=[a.getLeft(),a.getTop()-1];d=a.getRight()-a.getLeft()+1;break;case 1:c=[0,1];e=[a.getRight()+1,a.getTop()];d=a.getBottom()-a.getTop()+1;break;case 2:c=[1,0];e=[a.getLeft(),a.getBottom()+1];d=a.getRight()-a.getLeft()+1;break;case 3:c=[0,1],e=[a.getLeft()-
1,a.getTop()],d=a.getBottom()-a.getTop()+1}a=[];b=-2;for(var h=0;h<d;h++){var f=e[0]+h*c[0],l=e[1]+h*c[1];a.push(null);1==this._map[f][l]?b!=h-1&&(a[h]=[f,l]):(b=h)&&(a[h-1]=null)}for(e=a.length-1;0<=e;e--)a[e]||a.splice(e,1);return a.length?r.getItem(a):null};b._digLine=function(a){for(var b=1;b<a.length;b++){var g=a[b-1],c=a[b];g=new W(g[0],g[1],c[0],c[1]);g.create(this._digCallback);this._corridors.push(g)}};b._digCallback=function(a,b,g){this._map[a][b]=g;0==g&&this._dug++};b._isWallCallback=
function(a,b){return 0>a||0>b||a>=this._width||b>=this._height?!1:1==this._map[a][b]};b._canBeDugCallback=function(a,b){return 1>a||1>b||a+1>=this._width||b+1>=this._height?!1:1==this._map[a][b]};return c}(H);var G=function(d){function c(a,b,g){void 0===g&&(g={});a=d.call(this,a,b)||this;a._options={born:[5,6,7,8],survive:[4,5,6,7,8],topology:8};a.setOptions(g);a._dirs=v[a._options.topology];a._map=a._fillMap(0);return a}_inheritsLoose(c,d);var b=c.prototype;b.randomize=function(a){for(var b=0;b<
this._width;b++)for(var g=0;g<this._height;g++)this._map[b][g]=r.getUniform()<a?1:0;return this};b.setOptions=function(a){Object.assign(this._options,a)};b.set=function(a,b,g){this._map[a][b]=g};b.create=function(a){for(var b=this._fillMap(0),g=this._options.born,c=this._options.survive,d=0;d<this._height;d++){var h=1,f=0;6==this._options.topology&&(h=2,f=d%2);for(;f<this._width;f+=h){var l=this._map[f][d],k=this._getNeighbors(f,d);l&&-1!=c.indexOf(k)?b[f][d]=1:l||-1==g.indexOf(k)||(b[f][d]=1)}}this._map=
b;a&&this._serviceCallback(a)};b._serviceCallback=function(a){for(var b=0;b<this._height;b++){var g=1,c=0;6==this._options.topology&&(g=2,c=b%2);for(;c<this._width;c+=g)a(c,b,this._map[c][b])}};b._getNeighbors=function(a,b){for(var e=0,c=0;c<this._dirs.length;c++){var d=this._dirs[c],h=a+d[0];d=b+d[1];0>h||h>=this._width||0>d||d>=this._height||(e+=1==this._map[h][d]?1:0)}return e};b.connect=function(a,b,g){b||(b=0);var e=[],c={},d=1,f=[0,0];6==this._options.topology&&(d=2,f=[0,1]);for(var l=0;l<this._height;l++)for(var k=
f[l%2];k<this._width;k+=d)if(this._freeSpace(k,l,b)){var n=[k,l];c[this._pointKey(n)]=n;e.push([k,l])}d=e[r.getUniformInt(0,e.length-1)];f=this._pointKey(d);e={};e[f]=d;delete c[f];for(this._findConnected(e,c,[d],!1,b);0<Object.keys(c).length;){f=this._getFromTo(e,c);d=f[0];l=f[1];f={};f[this._pointKey(d)]=d;this._findConnected(f,c,[d],!0,b);(6==this._options.topology?this._tunnelToConnected6:this._tunnelToConnected).call(this,l,d,e,c,b,g);for(var q in f)d=f[q],this._map[d[0]][d[1]]=b,e[q]=d,delete c[q]}a&&
this._serviceCallback(a)};b._getFromTo=function(a,b){for(var e=[0,0],c=[0,0],d,h=Object.keys(a),f=Object.keys(b),l=0;5>l&&!(h.length<f.length?(e=h,c=a[e[r.getUniformInt(0,e.length-1)]],e=this._getClosest(c,b)):(e=f,e=b[e[r.getUniformInt(0,e.length-1)]],c=this._getClosest(e,a)),d=(e[0]-c[0])*(e[0]-c[0])+(e[1]-c[1])*(e[1]-c[1]),64>d);l++);return[e,c]};b._getClosest=function(a,b){var e=null,c=null,d;for(d in b){var h=b[d],f=(h[0]-a[0])*(h[0]-a[0])+(h[1]-a[1])*(h[1]-a[1]);if(null==c||f<c)c=f,e=h}return e};
b._findConnected=function(a,b,g,c,d){for(;0<g.length;){var e=g.splice(0,1)[0];e=6==this._options.topology?[[e[0]+2,e[1]],[e[0]+1,e[1]-1],[e[0]-1,e[1]-1],[e[0]-2,e[1]],[e[0]-1,e[1]+1],[e[0]+1,e[1]+1]]:[[e[0]+1,e[1]],[e[0]-1,e[1]],[e[0],e[1]+1],[e[0],e[1]-1]];for(var f=0;f<e.length;f++){var m=this._pointKey(e[f]);null==a[m]&&this._freeSpace(e[f][0],e[f][1],d)&&(a[m]=e[f],c||delete b[m],g.push(e[f]))}}};b._tunnelToConnected=function(a,b,g,c,d,f){if(b[0]<a[0]){var e=b;var m=a}else e=a,m=b;for(var h=e[0];h<=
m[0];h++){this._map[h][e[1]]=d;var p=[h,e[1]],k=this._pointKey(p);g[k]=p;delete c[k]}f&&e[0]<m[0]&&f(e,[m[0],e[1]]);h=m[0];b[1]<a[1]?(e=b,m=a):(e=a,m=b);for(a=e[1];a<m[1];a++)this._map[h][a]=d,b=[h,a],p=this._pointKey(b),g[p]=b,delete c[p];f&&e[1]<m[1]&&f([m[0],e[1]],[m[0],m[1]])};b._tunnelToConnected6=function(a,b,g,c,d,f){if(b[0]<a[0]){var e=b;var m=a}else e=a,m=b;var h=e[0];for(e=e[1];h!=m[0]||e!=m[1];){var p=2;e<m[1]?(e++,p=1):e>m[1]&&(e--,p=1);h=h<m[0]?h+p:h>m[0]?h-p:m[1]%2?h-p:h+p;this._map[h][e]=
d;p=[h,e];var k=this._pointKey(p);g[k]=p;delete c[k]}f&&f(b,a)};b._freeSpace=function(a,b,g){return 0<=a&&a<this._width&&0<=b&&b<this._height&&this._map[a][b]==g};b._pointKey=function(a){return a[0]+"."+a[1]};return c}(w),ya={room:N,corridor:W};H=function(d){function c(a,b,g){void 0===g&&(g={});a=d.call(this,a,b)||this;a._options=Object.assign({roomWidth:[3,9],roomHeight:[3,5],corridorLength:[3,10],dugPercentage:.2,timeLimit:1E3},g);a._features={room:4,corridor:4};a._map=[];a._featureAttempts=20;
a._walls={};a._dug=0;a._digCallback=a._digCallback.bind(_assertThisInitialized(a));a._canBeDugCallback=a._canBeDugCallback.bind(_assertThisInitialized(a));a._isWallCallback=a._isWallCallback.bind(_assertThisInitialized(a));a._priorityWallCallback=a._priorityWallCallback.bind(_assertThisInitialized(a));return a}_inheritsLoose(c,d);var b=c.prototype;b.create=function(a){this._rooms=[];this._corridors=[];this._map=this._fillMap(1);this._walls={};this._dug=0;var b=(this._width-2)*(this._height-2);this._firstRoom();
var g=Date.now();do{var c=0;if(Date.now()-g>this._options.timeLimit)break;var d=this._findWall();if(!d)break;var f=d.split(",");d=parseInt(f[0]);f=parseInt(f[1]);var k=this._getDiggingDirection(d,f);if(k){var l=0;do if(l++,this._tryFeature(d,f,k[0],k[1])){this._removeSurroundingWalls(d,f);this._removeSurroundingWalls(d-k[0],f-k[1]);break}while(l<this._featureAttempts);for(var n in this._walls)1<this._walls[n]&&c++}}while(this._dug/b<this._options.dugPercentage||c);this._addDoors();if(a)for(b=0;b<
this._width;b++)for(g=0;g<this._height;g++)a(b,g,this._map[b][g]);this._walls={};this._map=[];return this};b._digCallback=function(a,b,g){0==g||2==g?(this._map[a][b]=0,this._dug++):this._walls[a+","+b]=1};b._isWallCallback=function(a,b){return 0>a||0>b||a>=this._width||b>=this._height?!1:1==this._map[a][b]};b._canBeDugCallback=function(a,b){return 1>a||1>b||a+1>=this._width||b+1>=this._height?!1:1==this._map[a][b]};b._priorityWallCallback=function(a,b){this._walls[a+","+b]=2};b._firstRoom=function(){var a=
N.createRandomCenter(Math.floor(this._width/2),Math.floor(this._height/2),this._options);this._rooms.push(a);a.create(this._digCallback)};b._findWall=function(){var a=[],b=[],g;for(g in this._walls)2==this._walls[g]?b.push(g):a.push(g);a=b.length?b:a;if(!a.length)return null;a=r.getItem(a.sort());delete this._walls[a];return a};b._tryFeature=function(a,b,g,c){var e=r.getWeightedValue(this._features);a=ya[e].createRandomAt(a,b,g,c,this._options);if(!a.isValid(this._isWallCallback,this._canBeDugCallback))return!1;
a.create(this._digCallback);a instanceof N&&this._rooms.push(a);a instanceof W&&(a.createPriorityWalls(this._priorityWallCallback),this._corridors.push(a));return!0};b._removeSurroundingWalls=function(a,b){for(var e=v[4],c=0;c<e.length;c++){var d=e[c],f=a+d[0],k=b+d[1];delete this._walls[f+","+k];f=a+2*d[0];k=b+2*d[1];delete this._walls[f+","+k]}};b._getDiggingDirection=function(a,b){if(0>=a||0>=b||a>=this._width-1||b>=this._height-1)return null;for(var e=null,c=v[4],d=0;d<c.length;d++){var f=c[d];
if(!this._map[a+f[0]][b+f[1]]){if(e)return null;e=f}}return e?[-e[0],-e[1]]:null};b._addDoors=function(){function a(a,e){return 1==b[a][e]}for(var b=this._map,c=0;c<this._rooms.length;c++){var d=this._rooms[c];d.clearDoors();d.addDoors(a)}};return c}(H);var za=function(d){function c(){return d.apply(this,arguments)||this}_inheritsLoose(c,d);c.prototype.create=function(b){for(var a=this._fillMap(1),e=Math.ceil((this._width-2)/2),c=[],d=[],f=0;f<e;f++)c.push(f),d.push(f);c.push(e-1);for(f=1;f+3<this._height;f+=
2)for(var h=0;h<e;h++){var k=2*h+1,l=f;a[k][l]=0;h!=c[h+1]&&.375<r.getUniform()&&(ba(h,c,d),a[k+1][l]=0);h!=c[h]&&.375<r.getUniform()?ca(h,c,d):a[k][l+1]=0}for(h=0;h<e;h++)k=2*h+1,l=f,a[k][l]=0,h!=c[h+1]&&(h==c[h]||.375<r.getUniform())&&(ba(h,c,d),a[k+1][l]=0),ca(h,c,d);for(e=0;e<this._width;e++)for(c=0;c<this._height;c++)b(e,c,a[e][c]);return this};return c}(w),Aa=function(d){function c(){var a=d.apply(this,arguments)||this;a._stack=[];a._map=[];return a}_inheritsLoose(c,d);var b=c.prototype;b.create=
function(a){var b=this._width,c=this._height;this._map=[];for(var d=0;d<b;d++){this._map.push([]);for(var f=0;f<c;f++)this._map[d].push(0==d||0==f||d+1==b||f+1==c?1:0)}this._stack=[[1,1,b-2,c-2]];this._process();for(d=0;d<b;d++)for(f=0;f<c;f++)a(d,f,this._map[d][f]);this._map=[];return this};b._process=function(){for(;this._stack.length;){var a=this._stack.shift();this._partitionRoom(a)}};b._partitionRoom=function(a){for(var b=[],c=[],d=a[0]+1;d<a[2];d++){var f=this._map[d][a[3]+1];!this._map[d][a[1]-
1]||!f||d%2||b.push(d)}for(d=a[1]+1;d<a[3];d++)f=this._map[a[2]+1][d],!this._map[a[0]-1][d]||!f||d%2||c.push(d);if(b.length&&c.length){b=r.getItem(b);c=r.getItem(c);this._map[b][c]=1;d=[];f=[];d.push(f);for(var h=a[0];h<b;h++)this._map[h][c]=1,h%2&&f.push([h,c]);f=[];d.push(f);for(h=b+1;h<=a[2];h++)this._map[h][c]=1,h%2&&f.push([h,c]);f=[];d.push(f);for(h=a[1];h<c;h++)this._map[b][h]=1,h%2&&f.push([b,h]);f=[];d.push(f);for(h=c+1;h<=a[3];h++)this._map[b][h]=1,h%2&&f.push([b,h]);f=r.getItem(d);for(h=
0;h<d.length;h++){var k=d[h];k!=f&&(k=r.getItem(k),this._map[k[0]][k[1]]=0)}this._stack.push([a[0],a[1],b-1,c-1]);this._stack.push([b+1,a[1],a[2],c-1]);this._stack.push([a[0],c+1,b-1,a[3]]);this._stack.push([b+1,c+1,a[2],a[3]])}};return c}(w),Ba=function(d){function c(a,b,c){void 0===c&&(c=0);a=d.call(this,a,b)||this;a._regularity=c;a._map=[];return a}_inheritsLoose(c,d);var b=c.prototype;b.create=function(a){var b=this._width,c=this._height,d=this._fillMap(1);b-=b%2?1:2;c-=c%2?1:2;var f=0,h=[[0,
0],[0,0],[0,0],[0,0]];do{var k=1+2*Math.floor(r.getUniform()*(b-1)/2);var l=1+2*Math.floor(r.getUniform()*(c-1)/2);f||(d[k][l]=0);if(!d[k][l]){this._randomize(h);do{0==Math.floor(r.getUniform()*(this._regularity+1))&&this._randomize(h);var n=!0;for(var q=0;4>q;q++){var t=k+2*h[q][0];var C=l+2*h[q][1];if(this._isFree(d,t,C,b,c)){d[t][C]=0;d[k+h[q][0]][l+h[q][1]]=0;k=t;l=C;n=!1;f++;break}}}while(!n)}}while(f+1<b*c/4);for(b=0;b<this._width;b++)for(c=0;c<this._height;c++)a(b,c,d[b][c]);this._map=[];return this};
b._randomize=function(a){for(var b=0;4>b;b++)a[b][0]=0,a[b][1]=0;switch(Math.floor(4*r.getUniform())){case 0:a[0][0]=-1;a[1][0]=1;a[2][1]=-1;a[3][1]=1;break;case 1:a[3][0]=-1;a[2][0]=1;a[1][1]=-1;a[0][1]=1;break;case 2:a[2][0]=-1;a[3][0]=1;a[0][1]=-1;a[1][1]=1;break;case 3:a[1][0]=-1,a[0][0]=1,a[3][1]=-1,a[2][1]=1}};b._isFree=function(a,b,c,d,f){return 1>b||1>c||b>=d||c>=f?!1:a[b][c]};return c}(w);w=function(d){function c(a,b,c){a=d.call(this,a,b)||this;a.map=[];a.rooms=[];a.connectedCells=[];c=Object.assign({cellWidth:3,
cellHeight:3},c);c.hasOwnProperty("roomWidth")||(c.roomWidth=a._calculateRoomSize(a._width,c.cellWidth));c.hasOwnProperty("roomHeight")||(c.roomHeight=a._calculateRoomSize(a._height,c.cellHeight));a._options=c;return a}_inheritsLoose(c,d);var b=c.prototype;b.create=function(a){this.map=this._fillMap(1);this.rooms=[];this.connectedCells=[];this._initRooms();this._connectRooms();this._connectUnconnectedRooms();this._createRandomRoomConnections();this._createRooms();this._createCorridors();if(a)for(var b=
0;b<this._width;b++)for(var c=0;c<this._height;c++)a(b,c,this.map[b][c]);return this};b._calculateRoomSize=function(a,b){var e=Math.floor(a/b*.8);a=Math.floor(a/b*.25);2>a&&(a=2);2>e&&(e=2);return[a,e]};b._initRooms=function(){for(var a=0;a<this._options.cellWidth;a++){this.rooms.push([]);for(var b=0;b<this._options.cellHeight;b++)this.rooms[a].push({x:0,y:0,width:0,height:0,connections:[],cellx:a,celly:b})}};b._connectRooms=function(){var a=r.getUniformInt(0,this._options.cellWidth-1),b=r.getUniformInt(0,
this._options.cellHeight-1);do{var c=[0,2,4,6];c=r.shuffle(c);do{var d=!1;var f=c.pop();var h=a+v[8][f][0];f=b+v[8][f][1];if(!(0>h||h>=this._options.cellWidth||0>f||f>=this._options.cellHeight)){var k=this.rooms[a][b];if(0<k.connections.length&&k.connections[0][0]==h&&k.connections[0][1]==f)break;k=this.rooms[h][f];0==k.connections.length&&(k.connections.push([a,b]),this.connectedCells.push([h,f]),a=h,b=f,d=!0)}}while(0<c.length&&0==d)}while(0<c.length)};b._connectUnconnectedRooms=function(){var a=
this._options.cellWidth,b=this._options.cellHeight;this.connectedCells=r.shuffle(this.connectedCells);for(var c,d,f,h=0;h<this._options.cellWidth;h++)for(var k=0;k<this._options.cellHeight;k++)if(c=this.rooms[h][k],0==c.connections.length){var l=[0,2,4,6];l=r.shuffle(l);f=!1;do{var n=l.pop(),q=h+v[8][n][0];n=k+v[8][n][1];if(!(0>q||q>=a||0>n||n>=b)){d=this.rooms[q][n];f=!0;if(0==d.connections.length)break;for(q=0;q<d.connections.length;q++)if(d.connections[q][0]==h&&d.connections[q][1]==k){f=!1;break}if(f)break}}while(l.length);
f?c.connections.push([d.cellx,d.celly]):console.log("-- Unable to connect room.")}};b._createRandomRoomConnections=function(){};b._createRooms=function(){for(var a=this._width,b=this._height,c=this._options.cellWidth,d=this._options.cellHeight,f=Math.floor(this._width/c),h=Math.floor(this._height/d),k,l,n=this._options.roomWidth,q=this._options.roomHeight,t,C,u,A=0;A<c;A++)for(var v=0;v<d;v++){t=f*A;C=h*v;0==t&&(t=1);0==C&&(C=1);k=r.getUniformInt(n[0],n[1]);l=r.getUniformInt(q[0],q[1]);if(0<v)for(u=
this.rooms[A][v-1];3>C-(u.y+u.height);)C++;if(0<A)for(u=this.rooms[A-1][v];3>t-(u.x+u.width);)t++;u=Math.round(r.getUniformInt(0,f-k)/2);for(var w=Math.round(r.getUniformInt(0,h-l)/2);t+u+k>=a;)u?u--:k--;for(;C+w+l>=b;)w?w--:l--;t+=u;C+=w;this.rooms[A][v].x=t;this.rooms[A][v].y=C;this.rooms[A][v].width=k;this.rooms[A][v].height=l;for(u=t;u<t+k;u++)for(w=C;w<C+l;w++)this.map[u][w]=0}};b._getWallPosition=function(a,b){if(1==b||3==b){var c=r.getUniformInt(a.x+1,a.x+a.width-2);if(1==b){var e=a.y-2;a=
e+1}else e=a.y+a.height+1,a=e-1;this.map[c][a]=0}else e=r.getUniformInt(a.y+1,a.y+a.height-2),2==b?(c=a.x+a.width+1,a=c-1):(c=a.x-2,a=c+1),this.map[a][e]=0;return[c,e]};b._drawCorridor=function(a,b){var c=b[0]-a[0],e=b[1]-a[1];b=a[0];a=a[1];var d=[];var f=Math.abs(c);var k=Math.abs(e);var l=r.getUniform();var n=1-l;c=0<c?2:6;e=0<e?4:0;f<k?(l=Math.ceil(k*l),d.push([e,l]),d.push([c,f]),l=Math.floor(k*n),d.push([e,l])):(l=Math.ceil(f*l),d.push([c,l]),d.push([e,k]),l=Math.floor(f*n),d.push([c,l]));for(this.map[b][a]=
0;0<d.length;)for(f=d.pop();0<f[1];)b+=v[8][f[0]][0],a+=v[8][f[0]][1],this.map[b][a]=0,--f[1]};b._createCorridors=function(){for(var a=this._options.cellWidth,b=this._options.cellHeight,c,d,f,h,k=0;k<a;k++)for(var l=0;l<b;l++){c=this.rooms[k][l];for(var n=0;n<c.connections.length;n++)d=c.connections[n],d=this.rooms[d[0]][d[1]],d.cellx>c.cellx?(f=2,h=4):d.cellx<c.cellx?(f=4,h=2):d.celly>c.celly?(f=3,h=1):(f=1,h=3),this._drawCorridor(this._getWallPosition(c,f),this._getWallPosition(d,h))}};return c}(w);
B={Arena:B,Uniform:F,Cellular:G,Digger:H,EllerMaze:za,DividedMaze:Aa,IceyMaze:Ba,Rogue:w};var Ca=.5*(Math.sqrt(3)-1),K=(3-Math.sqrt(3))/6;w={Simplex:function(d){function c(b){void 0===b&&(b=256);var a=d.call(this)||this;a._gradients=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]];for(var c=[],g=0;g<b;g++)c.push(g);c=r.shuffle(c);a._perms=[];a._indexes=[];for(g=0;g<2*b;g++)a._perms.push(c[g%b]),a._indexes.push(a._perms[g]%a._gradients.length);return a}_inheritsLoose(c,d);c.prototype.get=function(b,
a){var c=this._perms,d=this._indexes,f=c.length/2,p=0,h=0,n=0,l=(b+a)*Ca,q=Math.floor(b+l);var r=Math.floor(a+l);var t=(q+r)*K;l=b-(q-t);var u=a-(r-t);if(l>u){var v=1;var w=0}else v=0,w=1;t=l-v+K;var z=u-w+K;a=l-1+2*K;b=u-1+2*K;q=k(q,f);f=k(r,f);var B=.5-l*l-u*u;0<=B&&(B*=B,r=d[q+c[f]],p=this._gradients[r],p=B*B*(p[0]*l+p[1]*u));l=.5-t*t-z*z;0<=l&&(l*=l,r=d[q+v+c[f+w]],h=this._gradients[r],h=l*l*(h[0]*t+h[1]*z));l=.5-a*a-b*b;0<=l&&(l*=l,r=d[q+1+c[f+1]],c=this._gradients[r],n=l*l*(c[0]*a+c[1]*b));
return 70*(p+h+n)};return c}(function(){})};G=function(){function d(c,b,a,d){void 0===d&&(d={});this._toX=c;this._toY=b;this._passableCallback=a;this._options=Object.assign({topology:8},d);this._dirs=v[this._options.topology];8==this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}d.prototype._getNeighbors=function(c,b){for(var a=[],d=0;d<this._dirs.length;d++){var g=this._dirs[d],f=c+g[0];g=b+g[1];this._passableCallback(f,
g)&&a.push([f,g])}return a};return d}();F=function(d){function c(a,b,c,f){c=d.call(this,a,b,c,f)||this;c._computed={};c._todo=[];c._add(a,b,null);return c}_inheritsLoose(c,d);var b=c.prototype;b.compute=function(a,b,c){var d=a+","+b;d in this._computed||this._compute(a,b);if(d in this._computed)for(a=this._computed[d];a;)c(a.x,a.y),a=a.prev};b._compute=function(a,b){for(;this._todo.length;){var c=this._todo.shift();if(c.x==a&&c.y==b)break;for(var d=this._getNeighbors(c.x,c.y),e=0;e<d.length;e++){var f=
d[e],k=f[0];f=f[1];k+","+f in this._computed||this._add(k,f,c)}}};b._add=function(a,b,c){c={x:a,y:b,prev:c};this._computed[a+","+b]=c;this._todo.push(c)};return c}(G);G=function(d){function c(a,b,c,f){void 0===f&&(f={});a=d.call(this,a,b,c,f)||this;a._todo=[];a._done={};return a}_inheritsLoose(c,d);var b=c.prototype;b.compute=function(a,b,c){this._todo=[];this._done={};this._fromX=a;this._fromY=b;for(this._add(this._toX,this._toY,null);this._todo.length;){var d=this._todo.shift(),e=d.x+","+d.y;if(!(e in
this._done)){this._done[e]=d;if(d.x==a&&d.y==b)break;e=this._getNeighbors(d.x,d.y);for(var f=0;f<e.length;f++){var g=e[f],k=g[0];g=g[1];k+","+g in this._done||this._add(k,g,d)}}}if(a=this._done[a+","+b])for(;a;)c(a.x,a.y),a=a.prev};b._add=function(a,b,c){var d=this._distance(a,b);a={x:a,y:b,prev:c,g:c?c.g+1:0,h:d};b=a.g+a.h;for(c=0;c<this._todo.length;c++){var e=this._todo[c],f=e.g+e.h;if(b<f||b==f&&d<e.h){this._todo.splice(c,0,a);return}}this._todo.push(a)};b._distance=function(a,b){switch(this._options.topology){case 4:return Math.abs(a-
this._fromX)+Math.abs(b-this._fromY);case 6:return b=Math.abs(b-this._fromY),b+Math.max(0,(Math.abs(a-this._fromX)-b)/2);case 8:return Math.max(Math.abs(a-this._fromX),Math.abs(b-this._fromY))}};return c}(G);F={Dijkstra:F,AStar:G};G=function(){function d(b){this._scheduler=b;this._lock=1}var c=d.prototype;c.start=function(){return this.unlock()};c.lock=function(){this._lock++;return this};c.unlock=function(){if(!this._lock)throw Error("Cannot unlock unlocked engine");for(this._lock--;!this._lock;){var b=
this._scheduler.next();if(!b)return this.lock();(b=b.act())&&b.then&&(this.lock(),b.then(this.unlock.bind(this)))}return this};return d}();H=function(){function d(b,a){void 0===a&&(a={});this._reflectivityCallback=b;this._options={};a=Object.assign({passes:1,emissionThreshold:100,range:10},a);this._lights={};this._reflectivityCache={};this._fovCache={};this.setOptions(a)}var c=d.prototype;c.setOptions=function(b){Object.assign(this._options,b);b&&b.range&&this.reset();return this};c.setFOV=function(b){this._fov=
b;this._fovCache={};return this};c.setLight=function(b,a,c){b=b+","+a;c?this._lights[b]="string"==typeof c?z(c):c:delete this._lights[b];return this};c.clearLights=function(){this._lights={}};c.reset=function(){this._reflectivityCache={};this._fovCache={};return this};c.compute=function(b){var a={},c={},d={},f;for(f in this._lights){var k=this._lights[f];c[f]=[0,0,0];D(c[f],k)}for(f=0;f<this._options.passes;f++)this._emitLight(c,d,a),f+1!=this._options.passes&&(c=this._computeEmitters(d,a));for(var h in d)c=
h.split(","),a=parseInt(c[0]),c=parseInt(c[1]),b(a,c,d[h]);return this};c._emitLight=function(b,a,c){for(var d in b){var e=d.split(","),f=parseInt(e[0]);e=parseInt(e[1]);this._emitLightFromCell(f,e,b[d],a);c[d]=1}return this};c._computeEmitters=function(b,a){var c={},d;for(d in b)if(!(d in a)){var f=b[d];if(d in this._reflectivityCache)var k=this._reflectivityCache[d];else{var h=d.split(",");k=parseInt(h[0]);h=parseInt(h[1]);k=this._reflectivityCallback(k,h);this._reflectivityCache[d]=k}if(0!=k){h=
[0,0,0];for(var n=0,l=0;3>l;l++){var q=Math.round(f[l]*k);h[l]=q;n+=q}n>this._options.emissionThreshold&&(c[d]=h)}}return c};c._emitLightFromCell=function(b,a,c,d){var e=b+","+a;b=e in this._fovCache?this._fovCache[e]:this._updateFOV(b,a);for(var f in b){a=b[f];f in d?e=d[f]:(e=[0,0,0],d[f]=e);for(var g=0;3>g;g++)e[g]+=Math.round(c[g]*a)}return this};c._updateFOV=function(b,a){var c={};this._fovCache[b+","+a]=c;var d=this._options.range;this._fov.compute(b,a,d,function(a,b,e,f){e=f*(1-e/d);0!=e&&
(c[a+","+b]=e)}.bind(this));return c};return d}();f.Util=pa;f.Color=qa;f.Text=I;f.RNG=r;f.Display=wa;f.StringGenerator=xa;f.EventQueue=ka;f.Scheduler=V;f.FOV=J;f.Map=B;f.Noise=w;f.Path=F;f.Engine=G;f.Lighting=H;f.DEFAULT_WIDTH=80;f.DEFAULT_HEIGHT=25;f.DIRS=v;f.KEYS={VK_CANCEL:3,VK_HELP:6,VK_BACK_SPACE:8,VK_TAB:9,VK_CLEAR:12,VK_RETURN:13,VK_ENTER:14,VK_SHIFT:16,VK_CONTROL:17,VK_ALT:18,VK_PAUSE:19,VK_CAPS_LOCK:20,VK_ESCAPE:27,VK_SPACE:32,VK_PAGE_UP:33,VK_PAGE_DOWN:34,VK_END:35,VK_HOME:36,VK_LEFT:37,
VK_UP:38,VK_RIGHT:39,VK_DOWN:40,VK_PRINTSCREEN:44,VK_INSERT:45,VK_DELETE:46,VK_0:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_COLON:58,VK_SEMICOLON:59,VK_LESS_THAN:60,VK_EQUALS:61,VK_GREATER_THAN:62,VK_QUESTION_MARK:63,VK_AT:64,VK_A:65,VK_B:66,VK_C:67,VK_D:68,VK_E:69,VK_F:70,VK_G:71,VK_H:72,VK_I:73,VK_J:74,VK_K:75,VK_L:76,VK_M:77,VK_N:78,VK_O:79,VK_P:80,VK_Q:81,VK_R:82,VK_S:83,VK_T:84,VK_U:85,VK_V:86,VK_W:87,VK_X:88,VK_Y:89,VK_Z:90,VK_CONTEXT_MENU:93,VK_NUMPAD0:96,
VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8:104,VK_NUMPAD9:105,VK_MULTIPLY:106,VK_ADD:107,VK_SEPARATOR:108,VK_SUBTRACT:109,VK_DECIMAL:110,VK_DIVIDE:111,VK_F1:112,VK_F2:113,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_F10:121,VK_F11:122,VK_F12:123,VK_F13:124,VK_F14:125,VK_F15:126,VK_F16:127,VK_F17:128,VK_F18:129,VK_F19:130,VK_F20:131,VK_F21:132,VK_F22:133,VK_F23:134,VK_F24:135,VK_NUM_LOCK:144,VK_SCROLL_LOCK:145,
VK_CIRCUMFLEX:160,VK_EXCLAMATION:161,VK_DOUBLE_QUOTE:162,VK_HASH:163,VK_DOLLAR:164,VK_PERCENT:165,VK_AMPERSAND:166,VK_UNDERSCORE:167,VK_OPEN_PAREN:168,VK_CLOSE_PAREN:169,VK_ASTERISK:170,VK_PLUS:171,VK_PIPE:172,VK_HYPHEN_MINUS:173,VK_OPEN_CURLY_BRACKET:174,VK_CLOSE_CURLY_BRACKET:175,VK_TILDE:176,VK_COMMA:188,VK_PERIOD:190,VK_SLASH:191,VK_BACK_QUOTE:192,VK_OPEN_BRACKET:219,VK_BACK_SLASH:220,VK_CLOSE_BRACKET:221,VK_QUOTE:222,VK_META:224,VK_ALTGR:225,VK_WIN:91,VK_KANA:21,VK_HANGUL:21,VK_EISU:22,VK_JUNJA:23,
VK_FINAL:24,VK_HANJA:25,VK_KANJI:25,VK_CONVERT:28,VK_NONCONVERT:29,VK_ACCEPT:30,VK_MODECHANGE:31,VK_SELECT:41,VK_PRINT:42,VK_EXECUTE:43,VK_SLEEP:95};Object.defineProperty(f,"__esModule",{value:!0})});
